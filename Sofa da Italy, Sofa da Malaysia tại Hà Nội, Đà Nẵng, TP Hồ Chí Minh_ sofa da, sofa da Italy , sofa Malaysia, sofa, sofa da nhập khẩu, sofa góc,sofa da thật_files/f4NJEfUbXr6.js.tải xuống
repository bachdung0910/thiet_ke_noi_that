if (self.CavalryLogger) { CavalryLogger.start_js(["JR9FT"]); }

__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",FEED_PACK_ID:"2239834712900285",OZ_PACK_ID:"1456625217993235",AVATARS_PACK_ID:"2191329907595522",TRENDING_STICKER_PACK_ID:"924487421216423",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120}}),null);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MessengerMQTTGating",["gkx"],(function(a,b,c,d,e,f){"use strict";var g={_forcedOff:!1,isEnabled:function(){return b("gkx")("678651")&&!g._forcedOff},turnOff:function(){g._forcedOff=!0}};e.exports=g}),null);
__d("UserActivity",["Arbiter","Event"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3,h=500,i=-5,j=Date.now(),k=j,l=!1,m=Date.now(),n=document.hasFocus?document.hasFocus():!0,o=0,p=Date.now(),q=-1,r=-1,s={EVENT_INTERVAL_MS:h,subscribeOnce:function(a){var b=s.subscribe(function(c,d){s.unsubscribe(b),a(d)});return b},subscribe:function(a){return b("Arbiter").subscribe("useractivity/activity",a)},unsubscribe:function(a){a.unsubscribe()},isActive:function(a){return new Date()-j<(a||g)},isOnTab:function(){return n},hasBeenInactive:function(){return l},resetActiveStatus:function(){n=!0,l=!1},getLastInActiveEnds:function(){return m},getLastActive:function(){return j},setIdleTime:function(a){o=a},getLastLeaveTime:function(){return p},getLastInformTime:function(){return k},reset:function(){j=Date.now(),k=j,l=!1,m=Date.now(),n=document.hasFocus?document.hasFocus():!0,o=0,p=Date.now(),q=-1,r=-1}};function t(a){v(a,h)}function u(a){v(a,0)}function v(c,d){__p&&__p();d===void 0&&(d=0);var e=a.MouseEvent;if(e&&c instanceof e){if(/^mouse(enter|leave|move|out|over)$/.test(c.type)&&c.pageX==q&&c.pageY==r)return;q=c.pageX;r=c.pageY}j=Date.now();e=j-k;e>d?(k=j,n||(p=j),e>=(o||g)&&(l=!0,m=j),b("Arbiter").inform("useractivity/activity",{event:c,idleness:e,last_inform:k})):e<i&&(k=j)}function c(a){n=!0,m=Date.now(),u(a)}function d(a){n=!1,l=!0,p=Date.now()}b("Event").listen(window,"scroll",t);b("Event").listen(window,"focus",c);b("Event").listen(window,"blur",d);b("Event").listen(document.documentElement,{DOMMouseScroll:t,mousewheel:t,keydown:t,mouseover:t,mousemove:t,click:t},void 0,void 0,{passive:!0});b("Arbiter").subscribe("Event/stop",function(a,b){t(b.event)});e.exports=s}),null);
__d("XGraphQLBatchAPIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/api/graphqlbatch/",{queries:{type:"String"},batch_name:{type:"String"},scheduler:{type:"Enum",enumType:1},shared_params:{type:"String"},fb_api_req_friendly_name:{type:"String"},uft_request_id:{type:"String"}})}),null);
__d("WebGraphQL",["ActorURI","AsyncRequest","Deferred","FBLogger","WebGraphQLConfig","XGraphQLBatchAPIController","getAsyncParams","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var c=a.getURIBuilder().getURI(),d={exec:function(a,b){return d.execAll([a],b)[0]},execAll:function(a,d){__p&&__p();var e={},f={};a=a.map(function(a,c){c="o"+c;e[c]={doc_id:a.__getDocID(),query_params:a.__getVariables()};a=new(b("Deferred"))();f[c]=a;return a.getPromise()});var g=babelHelpers["extends"]({},b("getAsyncParams")("POST"));d&&d.actorID!=null&&(g[b("ActorURI").PARAMETER_ACTOR]=d.actorID);var h=d&&d.batchName?{batch_name:d.batchName}:{};h=new(b("AsyncRequest"))().setURI(c).setOption("suppressEvaluation",!0).setMethod("POST").setRequestHeader("Content-Type","application/x-www-form-urlencoded").setData(babelHelpers["extends"]({},h,g,{queries:JSON.stringify(e)})).setHandler(function(a){__p&&__p();a=a.getPayload();try{var c=a.response.split("\r\n");c.pop();c=c.map(function(a){return JSON.parse(a)});c.forEach(function(a){return Object.keys(a).forEach(function(b){var c=f[b];if(c){b=a[b];b.errors?c.reject(b):b.data?c.resolve(b.data):c.reject({data:{},errors:[{message:"Unexpected response received from server.",severity:"CRITICAL",response:b}]})}})})}catch(d){c=a.response;b("FBLogger")("webgraphql").catching(d).mustfix("Bad response: ","%s%s",c.substr(0,250),c.length>250?"[truncated]":"")}Object.keys(f).forEach(function(a){f[a].isSettled()||f[a].reject({data:{},errors:[{message:"No response received from server.",severity:"CRITICAL"}]})})}).setTimeoutHandler(b("WebGraphQLConfig").timeout,function(){Object.keys(f).forEach(function(a){f[a].isSettled()||f[a].reject({data:{},errors:[{message:"Request timed out.",severity:"CRITICAL"}]})})}).setErrorHandler(function(a){var b=a.getErrorDescription();Object.keys(f).forEach(function(c){f[c].isSettled()||f[c].reject({data:{},errors:[{message:b,severity:"CRITICAL",error:a.getError()}]})})});d&&d.msgrRegion&&h.setRequestHeader("X-MSGR-Region",d.msgrRegion);b("gkx")("801901")?h.setAllowCrossPageTransition(!0):d&&d.allowCrossPageTransition!=null&&h.setAllowCrossPageTransition(d.allowCrossPageTransition);h.send();return a},__forController:g};return d}a=g(b("XGraphQLBatchAPIController"));e.exports=a}),null);
__d("DOMContainer.react",["invariant","React","isNode"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.containerNode=null,c.setContainerNode=function(a){c.containerNode=a;var b=c.props.containerRef;typeof b==="function"&&b(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getDOMChild=function(){var a=this.props.children;b("isNode")(a)||g(0,1533);return a};d.shouldComponentUpdate=function(a){return a.children!==this.props.children};d.componentDidMount=function(){var a=this.containerNode;a!=null&&a.appendChild(this.getDOMChild())};d.componentDidUpdate=function(a){a=this.containerNode;if(a==null)return;while(a.lastChild)a.removeChild(a.lastChild);a.appendChild(this.getDOMChild())};d.render=function(){var a=this.props,c=a.display;a=babelHelpers.objectWithoutPropertiesLoose(a,["display"]);c=c==="block"?"div":"span";return b("React").createElement(c,babelHelpers["extends"]({},a,{ref:this.setContainerNode}),void 0)};return c}(b("React").Component);c.propTypes={display:a.oneOf(["inline","block"]),containerRef:a.func};c.defaultProps={display:"inline"};e.exports=c}),null);
__d("LineClamp.react",["cx","DOMContainer.react","Locale","React","ReactDOM","getElementText","getVendorPrefixedName","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("getVendorPrefixedName")("lineClamp");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={enableTooltip:!1},d.$2=function(a){a=b("ReactDOM").findDOMNode(a);a instanceof HTMLElement&&(d.innerElement=a,d.$3())},d.$4=function(a){a=b("ReactDOM").findDOMNode(a);a instanceof HTMLElement&&(d.rootElement=a,d.$3())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){var a;this.props.lineHeight&&!this.props.customEllipsisDisableGradient&&(a={bottom:this.props.lineHeight+"px"});var c;this.props.customEllipsis&&this.props.customEllipsisDisableGradient?c=b("Locale").isRTL()?"_1osp":"_1osq":c=b("Locale").isRTL()?"_4ik3 _2k5c":"_4ik3"+(this.props.enableCustomizedStyleForEllipsis?" _6q5n":"")+(this.props.enableCustomizedStyleForEllipsis?"":" _2k5d");return b("React").createElement("div",{style:a,className:c,key:"ellipsis"},this.props.customEllipsis?this.props.customEllipsis:"\u2026")};d.$3=function(){__p&&__p();if(!this.props.enableTooltipOnOverflow)return;if(!this.rootElement)return;var a=this.rootElement,b;if(this.$5())b=a.scrollHeight>a.offsetHeight;else{if(!this.innerElement)return;b=this.innerElement.offsetHeight>a.offsetHeight}this.state.enableTooltip!==b&&this.setState({enableTooltip:b})};d.$5=function(){return!!h&&!this.props.disableNative};d.componentDidMount=function(){this.$3()};d.componentDidUpdate=function(){this.$3()};d.render=function(){var a=this.$5(),c=b("joinClasses")(this.props.className,"_4ik4"+(a?" _4ik5":"")),d=this.props.hasXHPChildren?b("React").createElement(b("DOMContainer.react"),null,this.props.children):this.props.children,e={};this.props.lineHeight&&(e={lineHeight:this.props.lineHeight+"px"},this.props.fitHeightToShorterText?e=babelHelpers["extends"]({},e,{maxHeight:this.props.lineHeight*this.props.lines}):e=babelHelpers["extends"]({},e,{height:this.props.lineHeight*this.props.lines}));a?e[h]=this.props.lines:(c=b("joinClasses")(c,"clearfix"),this.props.customEllipsisDisableGradient?d=[b("React").createElement("div",{className:"_1osu",key:"spacer"}),this.$1(),b("React").createElement("div",{className:"_1osv",key:"inner",ref:this.$2},this.props.children)]:d=[b("React").createElement("div",{className:"_4ik6",key:"inner",ref:this.$2},d),this.$1()]);var f={};this.props.enableTooltipOnOverflow&&(f["data-hover"]="tooltip",this.state.enableTooltip&&(f["data-tooltip-content"]=a?b("getElementText")(this.rootElement):b("getElementText")(this.innerElement),this.props.tooltipDelay!=null&&(f["data-tooltip-delay"]=this.props.tooltipDelay)));return b("React").createElement("div",babelHelpers["extends"]({},f,{className:c,ref:this.$4,style:e}),d)};return c}(b("React").Component);e.exports=a}),null);
__d("BootloaderResource",[],(function(a,b,c,d,e,f){__p&&__p();var g={};a={preload:function(a){a.load()},read:function(b){__p&&__p();var a=b.getModuleIfRequired();if(a==null){var c=b.getModuleId();if(!g[c]){b=g[c]=b.load();b["finally"](function(){delete g[c]})}throw g[c]}return a}};e.exports=a}),null);
__d("CallbackManagerController",["ErrorUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=[],this.$2=[void 0],this.$3=a}var c=a.prototype;c.executeOrEnqueue=function(a,b,c){c=c||{};var d=this.$4(b,a,c);if(d)return 0;this.$2.push({fn:b,request:a,options:c});d=this.$2.length-1;this.$1.push(d);return d};c.unsubscribe=function(a){delete this.$2[a]};c.reset=function(){this.$2=[]};c.getRequest=function(a){return this.$2[a]};c.runPossibleCallbacks=function(a){__p&&__p();var b=this,c=this.$1;this.$1=[];var d=[];c.forEach(function(c){var e=b.$2[c];if(!e)return;e=b.$3(e.request,babelHelpers["extends"]({},e.options,a));e?d.push({args:e,id:c}):b.$1.push(c)});d.forEach(function(a){var c=a.args;a=a.id;var d=b.$2[a];if(!d)return;delete b.$2[a];b.$5(d.fn,c,d.request)})};c.$4=function(a,b,c){c=this.$3(b,c);c&&this.$5(a,c,b);return!!c};c.$5=function(a,c,d){d={ids:d};b("ErrorUtils").applyWithGuard(a,d,c)};return a}();e.exports=a}),null);
__d("KeyedCallbackManager",["CallbackManagerController","ErrorUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1={},this.$2=new(b("CallbackManagerController"))(this.$3.bind(this))}var c=a.prototype;c.executeOrEnqueue=function(a,c){__p&&__p();if(!(a instanceof Array)){var d=a,e=c;a=[a];c=function(a){e(a[d])}}a=a.filter(function(a){var c=a!==null&&a!==void 0;c||b("ErrorUtils").applyWithGuard(function(){throw new Error("KeyedCallbackManager.executeOrEnqueue: key "+JSON.stringify(a)+" is invalid")});return c});return this.$2.executeOrEnqueue(a,c)};c.unsubscribe=function(a){this.$2.unsubscribe(a)};c.reset=function(){this.$2.reset(),this.$1={}};c.getUnavailableResources=function(a){var b=this;a=this.$2.getRequest(a);var c=[];a&&(c=a.request.filter(function(a){return!b.$1[a]}));return c};c.getUnavailableResourcesFromRequest=function(a){a=Array.isArray(a)?a:[a];return a.filter(function(a){if(a!==null&&a!==void 0)return!this.$1[a]},this)};c.addResourcesAndExecute=function(a){Object.assign(this.$1,a),this.$2.runPossibleCallbacks()};c.setResource=function(a,b){this.$1[a]=b,this.$2.runPossibleCallbacks()};c.getResource=function(a){return this.$1[a]};c.getAllResources=function(){return this.$1};c.dumpResources=function(){var a={};for(var b in this.$1){var c=this.$1[b];typeof c==="object"&&(c=babelHelpers["extends"]({},c));a[b]=c}return a};c.$3=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c],e=this.$1[d];if(typeof e==="undefined")return!1;b[d]=e}return[b]};return a}();e.exports=a}),null);
__d("areJSONRepresentationsEqual",[],(function(a,b,c,d,e,f){function a(a,b){return JSON.stringify(a)==JSON.stringify(b)}e.exports=a}),null);
__d("SimpleFBAuthenticatedXHRRequest",["invariant","CurrentUser","DTSG","DTSGUtils","ServerJSDefine","SprinkleConfig","XHRRequest","isFacebookURI"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c)||this;var e={__dyn:b("ServerJSDefine").getLoadedModuleHash(),__req:(h++).toString(36),__ajax__:1,__a:1,__user:b("CurrentUser").getID()};a.prototype.setData.call(babelHelpers.assertThisInitialized(c),babelHelpers["extends"]({},d,e));return c}var d=c.prototype;d.send=function(){__p&&__p();var c=this;if(!b("isFacebookURI")(this.getURI()))return a.prototype.send.call(this);if(b("DTSG").getCachedToken){var d=b("DTSG").getCachedToken();if(d)return this.sendOnDTSGToken(d);else{b("DTSG").getToken().done(function(a){return c.sendOnDTSGToken(a)});return this}}else this.sendOnDTSGToken(b("DTSG").getToken())};d.sendOnDTSGToken=function(c){if(c){a.prototype.setData.call(this,babelHelpers["extends"]({},this.getData(),{fb_dtsg:c}));if(b("SprinkleConfig").param_name){var d;a.prototype.setData.call(this,babelHelpers["extends"]({},this.getData(),(d={},d[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(c),d)))}}return a.prototype.send.call(this)};d.setData=function(a){g(0,5518)};c.parseResponse=function(a){return JSON.parse(a.substr(9))};c.getPayload=function(a){a=c.parseResponse(a).payload;return a.payload?a.payload:a};return c}(b("XHRRequest"));e.exports=a}),null);
__d("XFantailLogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/fantail/",{service:{type:"String",required:!0}})}),null);
__d("FantailLogQueue",["ChannelClientID","CircularBuffer","PHPQuerySerializer","SimpleFBAuthenticatedXHRRequest","XFantailLogController","destroyOnUnload","setIntervalAcrossTransitions","sprintf"],(function(a,b,c,d,e,f){__p&&__p();var g={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};a=function(){"use strict";__p&&__p();function a(a){this.$2=a,this.$3=new(b("CircularBuffer"))(200),b("setIntervalAcrossTransitions")(this.$4.bind(this),30*1e3),b("destroyOnUnload")(this.$4.bind(this))}a.get=function(b){a.$1=a.$1||{};a.$1[b]=a.$1[b]||new a(b);return a.$1[b]};var c=a.prototype;c.debug=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.DEBUG,a].concat(c))};c.info=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.INFO,a].concat(c))};c.warn=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.WARN,a].concat(c))};c.error=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$5.apply(this,[g.ERROR,a].concat(c))};c.$5=function(a,c){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];var g=b("sprintf").apply(void 0,[c].concat(e));this.$3.write({log_time:Date.now(),log:g,severity:a,device_id:b("ChannelClientID").getID()})};c.$4=function(){var a=this.$3.read();if(a.length>0){var c={log_time:[],log:[],severity:[],device_id:[]};a.forEach(function(a){c.log_time.push(a.log_time),c.log.push(a.log),c.severity.push(a.severity),c.device_id.push(a.device_id)});this.$3.clear();a=b("XFantailLogController").getURIBuilder().setString("service",this.$2).getURI();new(b("SimpleFBAuthenticatedXHRRequest"))(a,c).setMethod("POST").setDataSerializer(b("PHPQuerySerializer").serialize).setRequestHeader("Content-Type","application/x-www-form-urlencoded").send()}};return a}();e.exports=a}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("DisplayGenderConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("FRXEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AGORA_GROUPS:"agora_groups",AGORA_RECENT_NEWS:"agora_recent_news",BLOCK_BUTTON:"block_button",BLOCK_COMPOSER:"block_composer",CHEVRON_BUTTON:"chevron_button",CHEVRON_TAGS:"chevron_tags",CONTENT_OVERLAY:"content_overlay",COMMENT:"comment",DEVELOPER_FEEDBACK_BUTTON:"developer_feedback_button",EVENTS_REPORTING:"events_reporting",FEEDBACK_BUTTON:"feedback_button",FOX_CHEVRON_TAGS:"fox_chevron_tags",GEMSTONE_MEDIA:"gemstone_media",GEMSTONE_MESSAGING:"gemstone_messaging",GEMSTONE_PROFILE:"gemstone_profile",GROUPS_ADMIN_FEEDBACK:"groups_admin_feedback",GROUPS_DISCOVER:"groups_discover_page",GROUPS_DISCOVER_HIDE_BUTTON:"groups_discover_hide_button",GROUPS_JOIN_QUESTION:"groups_join_question",GROUPS_LEAVE:"groups_leave",GROUPS_LEAVE_BROWSE:"groups_leave_browse",GROUPS_LEAVE_SPECIAL:"groups_leave_special",GROUP_MALL_RELATED_GROUPS_CHAINING:"group_mall_related_groups_chaining",GROUP_MALL_RHC:"group_mall_rhc",GROUPS_POLL:"groups_poll",GROUPS_REPORT:"groups_report",GROUPS_REPORT_TO_ADMIN:"groups_report_to_admin",GROUPS_TAB_CHAT_ROW:"groups_tab_chat_row",GROUPS_TAB_DISCOVER_FIRST:"groups_tab_discover_first",HATE_CTA:"hate_cta",HIDE_AD_BUTTON:"hide_ad_button",MARK_AS_SOLD_BUTTON:"mark_as_sold_button",MOBILE_GYSJ:"mobile_gysj",NFX:"nfx",NOTIFICATIONS_JEWEL:"notifications_jewel",PAGE_UNFOLLOW:"page_unfollow",PAGE_UNFOLLOW_CHEVRON:"page_unfollow_chevron",PAGE_UNLIKE:"page_unlike",PAGE_VERIFICATION_BADGE:"page_verification_badge",PROACTIVE_WARNING_BANNER:"proactive_warning_banner",PROFILE_REPORT_BUTTON:"profile_report_button",RELATED_SEARCHES:"related_searches",REPORT_AD_BUTTON:"report_ad_button",REPORT_BUTTON:"report_button",REPORT_LONG_PRESS:"report_long_press",SCHOOL_COMMUNITY_TAGS:"school_community_tags",SEARCH_TYPEAHEAD:"search_typeahead",SNACKBAR:"snackbar",STRUCTURED_REPORT_BUTTON:"structured_report_button",TOMBSTONE:"tombstone",X_OUT:"x_out",UNKNOWN:"unknown",UNOWNED_PAGE_ACTION_MENU_REPORT_PAGE:"unowned_page_action_menu_report_page",SUPPORT_HOME_HI_PRI:"support_home_hi_pri"})}),null);
__d("MercuryParticipantTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:"user",THREAD:"thread",EVENT:"event",PAGE:"page",FRIEND:"friend",FB4C:"fb4c",NON_FRIEND:"non_friend",SERVICE:"service",GUEST:"guest",PARENT_APPROVED_USER:"parent_approved_user",MESSAGE:"message",ASSISTANT_TYPEAHEAD:"assistant_typeahead"})}),null);
__d("MercuryTypeaheadConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_NON_FRIENDS_EXTRA_FETCH:3,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_USERS_MAX:13,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",MESSAGE_TYPE:"message",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("NFXActionConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_SUPPORT_REDIRECT:"APP_SUPPORT_REDIRECT",BAN_USER:"BAN_USER",BLOCK_ACTOR:"BLOCK_ACTOR",BLOCK_ACTOR_WITHOUT_DELAY:"BLOCK_ACTOR_WITHOUT_DELAY",BLOCK_APP:"BLOCK_APP",BLOCK_MESSAGES:"BLOCK_MESSAGES",BLOCK_PAGE:"BLOCK_PAGE",CLOSE_OLD_PROFILE:"CLOSE_OLD_PROFILE",CONTACT_FORM:"CONTACT_FORM",CONTACT_APP_DEVELOPER:"CONTACT_APP_DEVELOPER",COMMENT_MODERATION:"COMMENT_MODERATION",OPEN_COMPOSER:"OPEN_COMPOSER",DELETE:"DELETE",DELETE_AND_BLOCK:"DELETE_AND_BLOCK",DIDNT_RECEIVE_GAME_ITEM:"DIDNT_RECEIVE_GAME_ITEM",EDIT:"EDIT",EDIT_SENSITIVE_CONTENT:"EDIT_SENSITIVE_CONTENT",EDIT_SENSITIVE_CONTENT_WWW:"EDIT_SENSITIVE_CONTENT_WWW",EXPLORE_SEE_LESS:"EXPLORE_SEE_LESS",FOX_UNFOLLOW:"FOX_UNFOLLOW",FRX_PROFILE_REPORT_CONFIRMATION:"FRX_PROFILE_REPORT_CONFIRMATION",HIGHLIGHTS_UNFOLLOW:"HIGHLIGHTS_UNFOLLOW",CHEVRON_FEEDBACK_ENTRYPOINT:"CHEVRON_FEEDBACK_ENTRYPOINT",SAVE:"SAVE",HACKED_NOTIFY:"HACKED_NOTIFY",HELP_CENTER:"HELP_CENTER",HIDE_ADVERTISER:"HIDE_ADVERTISER",HIDE_FROM_TIMELINE:"HIDE_FROM_TIMELINE",HIDE_AGGREGATION_FROM_TIMELINE:"HIDE_AGGREGATION_FROM_TIMELINE",HIDE_PHOTO_FROM_TIMELINE:"HIDE_PHOTO_FROM_TIMELINE",HIDE_RESEARCH_POLLS:"HIDE_RESEARCH_POLLS",HIDE_FEED_TOPIC:"HIDE_FEED_TOPIC",HIDE_FEED_RECOMMENDATIONS:"HIDE_FEED_RECOMMENDATIONS",IGNORE_EVENT_INVITES:"IGNORE_EVENT_INVITES",IGNORE_MESSAGES:"IGNORE_MESSAGES",LEAVE_GROUP:"LEAVE_GROUP",LIMIT_FRIENDING_PRIVACY:"LIMIT_FRIENDING_PRIVACY",MARK_MESSAGE_THREAD_AS_SPAM:"MARK_MESSAGE_THREAD_AS_SPAM",MARK_AS_FALSE_NEWS:"MARK_AS_FALSE_NEWS",MARK_AS_SCAM:"MARK_AS_SCAM",MARK_AS_SPAM:"MARK_AS_SPAM",MARK_AS_SENSITIVE_CONTENT:"MARK_AS_SENSITIVE_CONTENT",MESSAGE:"MESSAGE",MESSENGER_REDIRECT:"MESSENGER_REDIRECT",MESSENGER_BLOCK_ACTOR:"MESSENGER_BLOCK_ACTOR",MESSENGER_GIVE_FEEDBACK_OR_REPORT:"MESSENGER_GIVE_FEEDBACK_OR_REPORT",MESSENGER_IGNORE_CONVERSATION:"MESSENGER_IGNORE_CONVERSATION",MESSENGER_LEAVE_GROUP:"MESSENGER_LEAVE_GROUP",MESSENGER_MUTE_CONVERSATION:"MESSENGER_MUTE_CONVERSATION",MESSENGER_MUTE_CONVERSATION_WITH_OPTIONS:"MESSENGER_MUTE_CONVERSATION_WITH_OPTIONS",MESSENGER_MUTE_STORY:"MESSENGER_MUTE_STORY",MESSENGER_VIEW_COMMUNITY_STANDARDS:"MESSENGER_VIEW_COMMUNITY_STANDARDS",MESSENGER_REPORT_GROUP_MEMBER:"MESSENGER_REPORT_GROUP_MEMBER",MESSENGER_REPORT_USER:"MESSENGER_REPORT_USER",MESSENGER_REPORT_MESSAGES:"MESSENGER_REPORT_MESSAGES",MESSENGER_REPORT_STORY:"MESSENGER_REPORT_STORY",NFX_AFTER_CONFIRMATION:"NFX_AFTER_CONFIRMATION",IN_APP_PAYMENTS_SUPPORT:"IN_APP_PAYMENTS_SUPPORT",PHONE_FRIEND:"PHONE_FRIEND",RECOVER_PROFILE:"RECOVER_PROFILE",REDIRECT:"REDIRECT",REDIRECT_ADS_PREFERENCES:"REDIRECT_ADS_PREFERENCES",REDIRECT_OBA_UPSELL:"REDIRECT_OBA_UPSELL",REMOVE_ADS_INTEREST:"REMOVE_ADS_INTEREST",REMOVE_EVENT:"REMOVE_EVENT",REPORT_ALREADY_REPORTED_CONTENT:"REPORT_ALREADY_REPORTED_CONTENT",REPEAT_REPORTER_REPORT_CONFIRMATION:"REPEAT_REPORTER_REPORT_CONFIRMATION",REPORT_CONTENT:"REPORT_CONTENT",REPORT_CONTENT_AFTER_CONFIRMATION:"REPORT_CONTENT_AFTER_CONFIRMATION",REPORT_CONTENT_WITH_TYPEAHEAD:"REPORT_CONTENT_WITH_TYPEAHEAD",REPORT_WORK_CONTENT:"REPORT_WORK_CONTENT",REPORT_WORK_CONTENT_WITH_REASON:"REPORT_WORK_CONTENT_WITH_REASON",REPORT_CONTENT_EDUCATION:"REPORT_CONTENT_EDUCATION",REPORT_IP_VIOLATION:"REPORT_IP_VIOLATION",REPORT_DISPUTED_ADMINS:"REPORT_DISPUTED_ADMINS",MARKETPLACE_REPORT_IP_VIOLATION:"MARKETPLACE_REPORT_IP_VIOLATION",REPORT_IMAGE_PRIVACY_VIOLATION:"REPORT_IMAGE_PRIVACY_VIOLATION",REPORT_AD_IP_VIOLATION:"REPORT_AD_IP_VIOLATION",REPORT_AD_TO_GROUP_ADMIN:"REPORT_AD_TO_GROUP_ADMIN",REPORT_PROFILE_FRAME_IP_VIOLATION:"REPORT_PROFILE_FRAME_IP_VIOLATION",REPORT_STORY_CONTENT_IP_VIOLATION:"REPORT_STORY_CONTENT_IP_VIOLATION",REPORT_TO_GROUP_ADMIN:"REPORT_TO_GROUP_ADMIN",REPORT_WITH_VIDEO_EVIDENCE:"REPORT_WITH_VIDEO_EVIDENCE",RESOLVE_PROBLEM:"RESOLVE_PROBLEM",RESOLVE_ACTOR_PROBLEM:"RESOLVE_ACTOR_PROBLEM",RESOLVE_PROBLEM_REDIRECT:"RESOLVE_PROBLEM_REDIRECT",SPAM_CLEANUP_CHECKPOINT:"SPAM_CLEANUP_CHECKPOINT",GEO_SPECIFIC_HARASSMENT_HELPLINE:"GEO_SPECIFIC_HARASSMENT_HELPLINE",TOMBSTONE_SURVEY:"TOMBSTONE_SURVEY",TOMBSTONE_IN_CONTEXT:"TOMBSTONE_IN_CONTEXT",ENABLE_TIMELINE_REVIEW:"ENABLE_TIMELINE_REVIEW",UNFOLLOW_FRIEND_LIST:"UNFOLLOW_FRIEND_LIST",UNFRIEND:"UNFRIEND",UNLIKE:"UNLIKE",UNSUBSCRIBE:"UNSUBSCRIBE",UNSUBSCRIBE_PAGE:"UNSUBSCRIBE_PAGE",UNSUBSCRIBE_DIRECTED_TARGET:"UNSUBSCRIBE_DIRECTED_TARGET",UNSUBSCRIBE_OWNER:"UNSUBSCRIBE_OWNER",UNSUBSCRIBE_RESHARER:"UNSUBSCRIBE_RESHARER",UNSUBSCRIBE_ATTACHED_STORY_ACTOR:"UNSUBSCRIBE_ATTACHED_STORY_ACTOR",UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET:"UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET",HIDE_APP:"HIDE_APP",SCAM_CONTACT_FORM:"SCAM_CONTACT_FORM",SHARE_PHOTO_AS_STORY:"SHARE_PHOTO_AS_STORY",SHOW_MESSAGE_PREFILLS:"SHOW_MESSAGE_PREFILLS",SNOOZE_ACTOR:"SNOOZE_ACTOR",SNOOZE_DIRECTED_TARGET:"SNOOZE_DIRECTED_TARGET",SNOOZE_OWNER:"SNOOZE_OWNER",SNOOZE_RESHARER:"SNOOZE_RESHARER",SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR:"SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR",SNOOZE_ATTACHED_STORY_DIRECTED_TARGET:"SNOOZE_ATTACHED_STORY_DIRECTED_TARGET",SNOOZE_DOMAIN:"SNOOZE_DOMAIN",SNOOZE_APP:"SNOOZE_APP",KEYWORD_SNOOZE_ENTRYPOINT:"KEYWORD_SNOOZE_ENTRYPOINT",REPORT_LIVING_ROOM:"REPORT_LIVING_ROOM",UNTAG:"UNTAG",UNTAG_SPONSOR_PAGE:"UNTAG_SPONSOR_PAGE",UNTAG_MEMORIALIZED_USER_FROM_THEIR_TIMELINE:"UNTAG_MEMORIALIZED_USER_FROM_THEIR_TIMELINE",HIDE:"HIDE",DONT_LIKE:"DONT_LIKE",HIDE_AD:"HIDE_AD",HIDE_AD_BREAKS:"HIDE_AD_BREAKS",HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY:"HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY",REPORT_AD:"REPORT_AD",PAGES_ACTIVE_ADS_REPORT_AD:"PAGES_ACTIVE_ADS_REPORT_AD",PAGES_ACTIVE_ADS_REPORT_ITEM:"PAGES_ACTIVE_ADS_REPORT_ITEM",POLITICAL_ARCHIVE_REPORT_AD:"POLITICAL_ARCHIVE_REPORT_AD",INTERN_SHOW_ADS_DEBUGGER_INFO:"INTERN_SHOW_ADS_DEBUGGER_INFO",TESTING:"TESTING",TESTING_LOGGING:"TESTING_LOGGING",TESTING_LOGGING_IDEMPOTENT:"TESTING_LOGGING_IDEMPOTENT",HIDE_VIDEO:"HIDE_VIDEO",HIDE_AD_WITH_AD_ALREADY_OWNED:"HIDE_AD_WITH_AD_ALREADY_OWNED",HIDE_AD_WITH_REMOVE_ITEM_FROM_AD:"HIDE_AD_WITH_REMOVE_ITEM_FROM_AD",HIDE_TOPIC_MISCLASSIFICATION:"HIDE_TOPIC_MISCLASSIFICATION",AD_ALREADY_OWNED:"AD_ALREADY_OWNED",REMOVE_ITEM_FROM_AD:"REMOVE_ITEM_FROM_AD",HEAD_PUBLISHER_APP_MENTIONS_BAN:"HEAD_PUBLISHER_APP_MENTIONS_BAN",HEAD_PUBLISHER_APP_MENTIONS_HIDE:"HEAD_PUBLISHER_APP_MENTIONS_HIDE",GOV_DIGEST_OPT_OUT:"GOV_DIGEST_OPT_OUT",VOTING_REMINDER_WRONG_LOCATION:"VOTING_REMINDER_WRONG_LOCATION",ELECTIONS_HIDE:"ELECTIONS_HIDE",LESS_FROM_ACTOR:"LESS_FROM_ACTOR",LESS_FROM_DIRECTED_TARGET:"LESS_FROM_DIRECTED_TARGET",LESS_FROM_ATTACHED_STORY_ACTOR:"LESS_FROM_ATTACHED_STORY_ACTOR",LESS_FROM_DOMAIN:"LESS_FROM_DOMAIN",LESS_FROM_APP:"LESS_FROM_APP",LESS_FROM_THROWBACK:"LESS_FROM_THROWBACK",THROWBACK_PREFERENCES:"THROWBACK_PREFERENCES",NEWSFEED_SETTINGS:"NEWSFEED_SETTINGS",BLOCK_SETTINGS:"BLOCK_SETTINGS",WRITE_IN:"WRITE_IN",DIRECT_SUPPORT:"DIRECT_SUPPORT",APP_INVITE_BLOCK_APP:"APP_INVITE_BLOCK_APP",APP_INVITE_BLOCK_USER:"APP_INVITE_BLOCK_USER",PAGES_LIKE_CHECKUP:"PAGES_LIKE_CHECKUP",COMPASSION_SUPPORT:"COMPASSION_SUPPORT",PYMA_XOUT:"PYMA_XOUT",PYMA_OPT_OUT:"PYMA_OPT_OUT",JOB_XOUT:"JOB_XOUT",JOB_UNIT_XOUT:"JOB_UNIT_XOUT",DELETE_FUNDRAISER:"DELETE_FUNDRAISER",HIDE_BREAKING_NEWS_CARD:"HIDE_BREAKING_NEWS_CARD",HIDE_SHOW_PYMF:"HIDE_SHOW_PYMF",HIDE_PYMK:"HIDE_PYMK",SELF_HARM_HELP_CENTER:"SELF_HARM_HELP_CENTER",MEMORIALIZATION_HELP_CENTER:"MEMORIALIZATION_HELP_CENTER",UNDERAGE_HELP_CENTER:"UNDERAGE_HELP_CENTER",HACKED_HELP_CENTER:"HACKED_HELP_CENTER",BULLYING_HELP_CENTER:"BULLYING_HELP_CENTER",STOLEN_GOODS_HELP_CENTER:"STOLEN_GOODS_HELP_CENTER",PRE_REPORT_CAPTCHA_SCREEN_REDIRECT:"PRE_REPORT_CAPTCHA_SCREEN_REDIRECT",PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT:"PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT",REPORT_ACTION_REQUIRING_EVIDENCE:"REPORT_ACTION_REQUIRING_EVIDENCE",SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR",SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND",SUPPORT_PLATFORM_REDIRECT_SEND_CARD:"SUPPORT_PLATFORM_REDIRECT_SEND_CARD",SUPPORT_PLATFORM_REDIRECT_LEARN:"SUPPORT_PLATFORM_REDIRECT_LEARN",WAIST_REDIRECT:"WAIST_REDIRECT",VIEW_ADS_REDIRECT:"VIEW_ADS_REDIRECT",AD_ARCHIVE_REDIRECT:"AD_ARCHIVE_REDIRECT",FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT:"FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT",FRX_REPORT_CONFIRMATION_SCREEN:"FRX_REPORT_CONFIRMATION_SCREEN",FRX_POLICY_CHECKLIST_REDIRECT:"FRX_POLICY_CHECKLIST_REDIRECT",FRX_NT_POLICY_CHECKLIST:"FRX_NT_POLICY_CHECKLIST",FRX_TEXT_HIGHLIGHTER_REDIRECT:"FRX_TEXT_HIGHLIGHTER_REDIRECT",DISABLE_IG_UNCONNECTED_STORIES:"DISABLE_IG_UNCONNECTED_STORIES",FRX_NT_REPORT_GROUP_CHAT_MEMBER_REDIRECT:"FRX_NT_REPORT_GROUP_CHAT_MEMBER_REDIRECT",FRX_NT_REPORT_GROUP_CHAT_MEMBER:"FRX_NT_REPORT_GROUP_CHAT_MEMBER",SIMPLE_ACTION_WHICH_REDIRECTS:"SIMPLE_ACTION_WHICH_REDIRECTS",MARKETPLACE_MESSENGER_REPORT_CONVERSATION:"MARKETPLACE_MESSENGER_REPORT_CONVERSATION",MARKETPLACE_SUPPORT_CALL:"MARKETPLACE_SUPPORT_CALL",MARKETPLACE_SUPPORT_CHAT:"MARKETPLACE_SUPPORT_CHAT",MARKETPLACE_SUPPORT_SMS:"MARKETPLACE_SUPPORT_SMS",CREATE_STRUCTURED_REPORT:"CREATE_STRUCTURED_REPORT",OPEN_SUPPORT_INBOX_FOR_STRUCTURED_REPORT:"OPEN_SUPPORT_INBOX_FOR_STRUCTURED_REPORT",FRX_POLICY_EDUCATION_REDIRECT:"FRX_POLICY_EDUCATION_REDIRECT",FRX_NT_POLICY_EDUCATION:"FRX_NT_POLICY_EDUCATION",FRX_PROCESS_EDUCATION_REDIRECT:"FRX_PROCESS_EDUCATION_REDIRECT",FRX_NT_PROCESS_EDUCATION:"FRX_NT_PROCESS_EDUCATION",MONETIZATION_CONTENT_GUIDELINES_HELP_CENTER_REDIRECT:"MONETIZATION_CONTENT_GUIDELINES_HELP_CENTER_REDIRECT",NCII_HELP_CENTER_REDIRECT:"NCII_HELP_CENTER_REDIRECT",PRIVACY_SHORTCUTS_REDIRECT:"PRIVACY_SHORTCUTS_REDIRECT",NEWS_FEED_PREFERENCES:"NEWS_FEED_PREFERENCES",BLACKLIST_CONTENT_REDIRECT:"BLACKLIST_CONTENT_REDIRECT",CLEAR_HISTORY_HELP_CENTER_REDIRECT:"CLEAR_HISTORY_HELP_CENTER_REDIRECT"})}),null);
__d("NFXContextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENT_MESSAGE_THREAD:1,ENT_REPORTABLE:2,ENT_SERP:3,ENT_STORY:4,PAGE_ACTIVE_ADS:5,POLITICAL_ARCHIVE_ADS:6,SUPPORT_INBOX:7,TESTING:8,REPORTABLE_AD:9,TOP_LEVEL:10})}),null);
__d("NFXStoryLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REJECT_FRIEND_REQUEST:"reject_friend_request",FEED:"feed",HOVERCARD:"hovercard",VIDEO_LIST_CHANNEL:"video_list_channel",VIDEO_PLAYLIST_CHANNEL:"video_playlist_channel",WATCHED_VIDEOS_CHANNEL:"watched_videos_channel",EXPLORE_FEED:"explore_feed",PROFILE_SELF:"profile_self",PROFILE_SOMEONE_ELSE:"profile_someone_else",FNRP_AUTOMATED_SCRIPT:"fnrp_automated_script",PAGE:"page",PAGE_INBOX:"page_inbox",PAGE_BLUE_VERIFICATION_BADGE:"page_blue_verification_badge",PAGE_GRAY_VERIFICATION_BADGE:"page_gray_verification_badge",PAGE_SHOP:"page_shop",PERMALINK:"permalink",PHOTO_VIEWER:"photo_viewer",PAGE_REVIEW:"page_review",POPULAR_AT:"popular_at",CURATED_SECTION:"curated_section",GROUP:"group",SUGGESTED_GROUP:"suggested_group",EVENT:"event",SEARCH:"search",SERP:"serp",UNKNOWN:"unknown",PROFILE_REPORTING_FLOW:"profile_reporting_flow",HEAD_PUBLISHER_APP_MENTIONS_FEED:"head_publisher_app_mentions_feed",MESSENGER:"messenger",MESSENGER_MONTAGE_VIEWER:"messenger_montage_viewer",MESSENGER_THREAD:"messenger_thread",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",CRISIS_FEED:"crisis_feed",CIVIC_PROPOSAL:"civic_proposal",SETTINGS:"settings",LIVE_MAP:"live_map",LIVING_ROOM:"living_room",JOB_APPLICATION:"job_application",JOB_BROWSER:"job_browser",JOB_DETAIL_VIEW:"job_detail_view",JOB_RECOMMENDATION_UNIT:"job_recommendation_unit",CONTENT_OVERLAY:"content_overlay",CHEVRON:"chevron",CHEVRON_GLYPH:"glyph",VIDEO_INLINE_PIVOT:"video_inline_pivot",OBJECTIONABLE_CONTENT_FILTER:"objectionable_content_filter",VIEW_PAGE_ADS:"view_page_ads",POLITICAL_ARCHIVE_ADS:"political_archive_ads",AD_LIBRARY_V2_POLITICAL_ADS:"ad_library_v2_political_ads",FEEDBACK_COMMENT:"feedback_comment",FRIEND_LIST:"friend_list",NOTIFICATION:"notification",IG_FEED:"ig_feed",IG_DISCOVER:"ig_discover",IG_POST:"ig_post",IG_PROFILE:"ig_profile",IG_STORY:"ig_story",IG_COMMENTS:"ig_comments",IG_DIRECT_MESSAGES:"ig_direct_messages",IG_LIVE:"ig_live",IG_PRODUCT:"ig_product",MESSENGER_THREAD_ACTION_PANEL:"messenger_thread_action_panel",MESSENGER_CONTACT_DETAILS:"messenger_contact_details",MESSENGER_DIRECT_THREAD_DETAILS:"messenger_direct_thread_details",MESSENGER_GROUP_THREAD_DETAILS:"messenger_group_thread_details",MESSENGER_DIRECT_THREAD_MESSAGE_REQUEST:"messenger_direct_thread_message_request",MESSENGER_GROUP_THREAD_MESSAGE_REQUEST:"messenger_group_thread_message_request",MESSENGER_DIRECT_THREAD_FILTERED_REQUEST:"messenger_direct_thread_filtered_request",MESSENGER_GROUP_THREAD_FILTERED_REQUEST:"messenger_group_thread_filtered_request",MESSENGER_EMPTY_DIRECT_THREAD:"messenger_empty_direct_thread",MESSENGER_P2B_DIRECT_THREAD_DETAILS:"messenger_p2b_direct_thread_details",TICKER:"ticker",FULLSCREEN_VIDEO_PLAYER:"fullscreen_video_player",ACTIVITY_LOG_FACE_ALERTS:"face_alerts",HELP_COMMUNITY:"help_community",SUPPORT_INBOX:"support_inbox",APP_INVITES_FEED:"app_invites_feed",CHAINING_FEED:"chaining_feed",SOCIAL_REPORTING_REDIRECT:"social_reporting_redirect",WWW_CHAT_HEAD:"www_chat_head",THROWBACK:"throwback",POST_TO_PAGE:"post_to_page",ACTIVITY_LOG:"activity_log",VIDEO_CHANNEL:"video_channel",VIDEO_CHANNELS:"video_channels",VIDEO_HOME:"video_home",REVIEWS_FEED:"reviews_feed",BACKSTAGE:"backstage",MESSENGER_ENCRYPTED_THREAD:"messenger_encrypted_thread",LOCAL_NEWS:"local_news",PLANNED_VIEWING_CURATED:"planned_viewing_curated",UI_EXPLORER_EXAMPLE:"ui_explorer_example",SERP_CONSOLE:"serp_console",LOL_FEED:"lol_feed",MARKETPLACE_ADS:"marketplace_ads",MARKETPLACE_BSG_PROFILE:"marketplace_bsg_profile",MARKETPLACE_BUY_SELL_GROUP_HOME:"marketplace_buy_sell_group_home",MARKETPLACE_PDP:"marketplace_pdp",MARKETPLACE_PDP_SELLER:"marketplace_pdp_seller",MARKETPLACE_PDP_QUESTION_AND_ANSWER:"marketplace_pdp_question_and_answer",MARKETPLACE_PROFILE:"marketplace_profile",MARKETPLACE_PROFILE_BUYER:"marketplace_profile_buyer",MARKETPLACE_PROFILE_SELLER:"marketplace_profile_seller",MARKETPLACE_RATING_CONFIRMATION:"marketplace_rating_confirmation",MARKETPLACE_RATING_CONFIRMATION_BUYER:"marketplace_rating_confirmation_buyer",MARKETPLACE_RATING_CONFIRMATION_SELLER:"marketplace_rating_confirmation_seller",MARKETPLACE_RATING_FLOW:"marketplace_rating_flow",MARKETPLACE_RATING_FLOW_BUYER:"marketplace_rating_flow_buyer",MARKETPLACE_RATING_FLOW_SELLER:"marketplace_rating_flow_seller",MARKETPLACE_RATE_BUYER:"marketplace_rate_buyer",MARKETPLACE_RATE_SELLER:"marketplace_rate_seller",MARKETPLACE_SCALED_RATE_BUYER:"marketplace_scaled_rate_buyer",MARKETPLACE_SCALED_RATE_SELLER:"marketplace_scaled_rate_seller",MARKETPLACE_B2C_REVIEW:"marketplace_b2c_review",MARKETPLACE_THREAD:"marketplace_thread",MARKETPLACE_THREAD_BUYER:"marketplace_thread_buyer",MARKETPLACE_THREAD_SELLER:"marketplace_thread_seller",MARKETPLACE_MESSENGER_REPORT_BUYER:"marketplace_messenger_report_buyer",MARKETPLACE_MESSENGER_REPORT_SELLER:"marketplace_messenger_report_seller",CANONICAL_MESSENGER_REPORT_BUYER:"canonical_messenger_report_buyer",CANONICAL_MESSENGER_REPORT_SELLER:"canonical_messenger_report_seller",MARKETPLACE_SHOP_PDP:"marketplace_shop_pdp",MARKETPLACE_SHOP_PDP_SELLER:"marketplace_shop_pdp_seller",MARKETPLACE_C2C_TRANSACTION_SURVEY:"marketplace_c2c_transaction_survey",NON_INTERACTIVE_ITEM_PDP:"non_interactive_item_pdp",MENTORSHIP_APPLICATION_TAB:"mentorship_application_tab",MENTORSHIP_ADMIN_ASSISTED_GALLERY:"mentorship_admin_assisted_gallery",MENTORSHIP_PEER_TO_PEER_GALLERY:"mentorship_peer_to_peer_gallery",POLITICAL_ISSUE_MODULE:"political_issue_module",ELECTION_HUB:"election_hub",DIRECT_MESSAGING:"direct_messaging",CAMERA_MEDIA_EFFECT:"camera_media_effect",PROFILE_DEPRECATED:"profile",TIMELINE_DEPRECATED:"timeline",TIMELINE_REVIEW:"timeline_review",BREAKUP_FLOW:"breakup_flow",ASYNC_TASK_DO_NOT_USE:"async",INSTANT_ARTICLES:"instant_articles",INSTANT_ARTICLE_WEBVIEW_AD:"instant_article_webview_ad",INSTANT_ARTICLE_NATIVE_AD:"instant_article_native_ad",IN_APP_BROWSER:"in_app_browser",INSTREAM_VIDEO:"instream_video",TOPIC_PAGE:"topic_page",GAMES_FEED:"games_feed",TAG_QUARANTINE:"tag_qurantine",STONEHENGE_CONSUMPTION:"stonehenge_consumption",ARTICLE_CONTEXT:"article_context",INTEGRITY_CONTEXT:"integrity_context",PROFILE_FRAME_DISCOVERY:"profile_frame_discovery",QUICK_PROMOTION:"quick_promotion",WOODHENGE_EXCLUSIVE_FEED:"woodhenge_exclusive_feed",AUDIENCE_INSIGHTS:"audience_insights",PROJECT_NEO:"project_neo",COMPASSION_RESOURCES:"compassion_resources",FOX_FEED:"fox_feed",FOX_CHEVRON:"fox_chevron",HIGHLIGHTS_UNIT:"highlights_unit",PAGE_SURFACE_RECOMMENDATIONS:"page_surface_recommendations",SOCIAL_LEARNING_GROUP_UNITS_LIST:"social_learning_group_units_list",PREVIEW_DIALOG:"preview_dialog",STORY:"story",CREATOR_APP_INSPIRATION_FEED:"creator_app_inspiration_feed",SCHOOL_COMMUNITY:"school_community",AGORA:"agora",AGORA_EVENTS:"agora_events",PINNED_CONVERSATION:"pinned_conversation",GEMSTONE_PROFILE:"gemstone_profile",VR_PERSONA_PROFILE:"vr_persona_profile",VR_SAFE_MODE:"vr_safe_mode",KOTOTORO_FEED:"kototoro_feed",KOTOTORO_COMMENT:"kototoro_comment",BALLOT:"ballot",CANDIDATE_VIDEOS:"candidate_videos",INSTANT_GAMES:"instant_games",INSTANT_GAMES_SPOTLIGHT:"instant_games_spotlight",INSTANT_GAMES_HUB:"instant_games_hub",INSTANT_GAMES_MESSENGER:"instant_games_messenger",APP_CENTER:"app_center",APP_PERMISSIONS_DIALOG:"app_permissions_dialog",CLEAR_HISTORY:"clear_history",GAME_DETAIL:"game_detail",GAME_PAGE:"game_page",GAMES_REQUESTS:"games_requests",GROUP_INSTALLED_APPS:"group_installed_apps",IN_GAME:"in_game",MOBILE_APP_PERMISSIONS:"mobile_app_permissions",MOBILE_REMOVED_APPS:"mobile_removed_apps",PAGE_LOGS:"page_logs",PERMISSIONS_LEGALESE:"permissions_legalese",REMOVED_APP_DIALOG:"removed_app_dialog",DEVELOPER_COMMUNITY_POST:"developer_community_post",PYML:"pyml",PORTAL_VIDEO:"portal_video",SAVE_COLLECTION_VIEW:"save_collection_view",SAVE_ITEM_VIEW:"save_item_view",APP_BOOKMARKS:"app_bookmarks",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_IN_PROGRESS:"bsg_for_sale_live_video_broadcast_in_progress",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_COMPLETE:"bsg_for_sale_live_video_broadcast_complete",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_IN_PROGRESS_FROM_POST:"bsg_for_sale_live_video_broadcast_in_progress_from_post",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_COMPLETE_FROM_POST:"bsg_for_sale_live_video_broadcast_complete_from_post"})}),null);
__d("PaymentModulesClient",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",MESSAGING_COMMERCE:"messaging_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",C2C_CHECKOUT_EXPERIENCES:"c2c_checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock",ADVERTISER_SUBSCRIPTION:"advertiser_subscription",NMOR_FB_BROWSER_PAY:"fb_browser_payment"})}),null);
__d("NFXContextFactory",["FBLogger","FRXEntryPoint","NFXActionConst","NFXContextType","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var c=function(a,b){if(b!==null)return b};return JSON.stringify({reportable_ent_token:a.reportable_ent_token,story_location:a.story_location,entry_point:a.entry_point,type:a.type,session_id:b("uuid")(),initial_action_name:a.initial_action_name,reportable_id:a.reportable_id,page_id:a.page_id,responsible_id:a.responsible_id},c)}function a(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;a=a.responsible_id;return g({type:b("NFXContextType").ENT_MESSAGE_THREAD,story_location:d,entry_point:e,reportable_ent_token:c,responsible_id:a})}function c(a){var c=a.reportable_id,d=a.page_id;a=a.storyLocation;return g({type:b("NFXContextType").POLITICAL_ARCHIVE_ADS,story_location:a,entry_point:b("FRXEntryPoint").UNKNOWN,initial_action_name:b("NFXActionConst").POLITICAL_ARCHIVE_REPORT_AD,reportable_id:c,page_id:d})}function d(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;a=a.initial_action_name;c===null&&b("FBLogger")("frx").warn("null or undefined reportable_ent_token in forEntReportable, location=%s entry_point=%s",d,e);return g({type:b("NFXContextType").ENT_REPORTABLE,story_location:d,entry_point:e,reportable_ent_token:c,initial_action_name:a})}e.exports={withEntReportable:d,withEntMessageThread:a,withPoliticalArchiveAds:c}}),null);
__d("generateLiteTypedLogger",["Banzai"],(function(a,b,c,d,e,f){"use strict";function a(a){return{log:function(c){b("Banzai").post(a,c,b("Banzai").BASIC)},logVital:function(c){b("Banzai").post(a,c,b("Banzai").VITAL)},logImmediately:function(c){b("Banzai").post(a,c,{signal:!0})}}}e.exports=a}),null);
__d("MqttWsClientTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1={},this.$2=a}var c=a.prototype;c.getForFBID=function(a){this.$1[a]||(this.$1[a]=new this.$2(a));return this.$1[a]};c.get=function(){return this.getForFBID(b("CurrentUser").getID())};a.mock=function(a){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};return a}();e.exports=a}),null);
__d("MercuryIDs",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isValid:function(a){return a==null||a===""||typeof a!=="string"?!1:/^\w{3,12}:.+/.test(a)},isValidThreadID:function(a){if(!g.isValid(a))return!1;a=g.tokenize(a);switch(a.type){case"user":case"support":case"thread":case"root":return!0;default:return(a.type==="pending"||a.type==="group")&&!b("gkx")("863760")?!0:!1}},tokenize:function(a){if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var b=a.indexOf(":");return{type:a.substr(0,b),value:a.substr(b+1)}},getUserIDFromParticipantID:function(a){if(!g.isValid(a))throw new Error("bad_id_format "+a);a=g.tokenize(a);var b=a.type;a=a.value;return b==="fbid"?a:null},getParticipantIDFromUserID:function(a){if(isNaN(a))throw new Error("Not a user ID: "+a);return"fbid:"+a},getUserIDFromThreadID:function(a){return!this.isCanonical(a)?null:this.tokenize(a).value},getThreadIDFromUserID:function(a){return"user:"+a},getThreadIDFromThreadFBID:function(a){return"thread:"+a},getThreadIDFromSupportInboxItemID:function(a){return"support:"+a},getThreadFBIDFromThreadID:function(a){return this.tokenize(a).value},getThreadKeyfromThreadIDUserID:function(a,b){__p&&__p();if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var c=this.tokenize(a).type;a=this.tokenize(a).value;if(c!=="user")return"g"+a;c="";var d="";if(a.length!==b.length)a.length>b.length?(c=a,d=b):(c=b,d=a);else if(b===a)return b+"u"+a;else{var e=0;while(e<a.length&&e<b.length)if(a[e]===b[e])e++;else{a[e]>b[e]?(c=a,d=b):(c=b,d=a);break}}return d+"u"+c},getThreadIDFromParticipantID:function(a){a=this.getUserIDFromParticipantID(a);return a?this.getThreadIDFromUserID(a):null},getParticipantIDFromFromThreadID:function(a){a=this.getUserIDFromThreadID(a);return a?this.getParticipantIDFromUserID(a):null},getSupportInboxItemIDFromThreadID:function(a){return this.tokenize(a).value},isCanonical:function(a){return this.isValid(a)&&this.tokenize(a).type==="user"},isGroupChat:function(a){return this.isValid(a)&&this.tokenize(a).type!=="user"},isLocalThread:function(a){return this.isValid(a)&&this.tokenize(a).type==="root"}};e.exports=g}),null);
__d("fbjs/lib/CSSCore",["CSSCore"],(function(a,b,c,d,e,f){"use strict";e.exports=b("CSSCore")}),null);
__d("fbjs/lib/ExecutionEnvironment",["ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";e.exports=b("ExecutionEnvironment")}),null);
__d("getVendorPrefixedEventName",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;c["ms"+a]="MS"+b;c["O"+a]="o"+b.toLowerCase();return c}var g={animationend:a("Animation","AnimationEnd"),animationiteration:a("Animation","AnimationIteration"),animationstart:a("Animation","AnimationStart"),transitionend:a("Transition","TransitionEnd")},h={},i={};b("fbjs/lib/ExecutionEnvironment").canUseDOM&&(i=document.createElement("div").style,"AnimationEvent"in window||(delete g.animationend.animation,delete g.animationiteration.animation,delete g.animationstart.animation),"TransitionEvent"in window||delete g.transitionend.transition);function c(a){if(h[a])return h[a];else if(!g[a])return a;var b=g[a];for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&c in i)return h[a]=b[c];return""}e.exports=c}),null);
__d("ReactTransitionEvents",["fbjs/lib/ExecutionEnvironment","getVendorPrefixedEventName"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function a(){var a=b("getVendorPrefixedEventName")("animationend"),c=b("getVendorPrefixedEventName")("transitionend");a&&g.push(a);c&&g.push(c)}b("fbjs/lib/ExecutionEnvironment").canUseDOM&&a();function h(a,b,c){a.addEventListener(b,c,!1)}function i(a,b,c){a.removeEventListener(b,c,!1)}c={addEndEventListener:function(a,b){if(g.length===0){window.setTimeout(b,0);return}g.forEach(function(c){h(a,c,b)})},removeEndEventListener:function(a,b){if(g.length===0)return;g.forEach(function(c){i(a,c,b)})}};e.exports=c}),null);
__d("ReactCSSTransitionGroupChild",["React","ReactDOM","ReactTransitionEvents","fbjs/lib/CSSCore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=17;a=b("React").createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:b("React").PropTypes.oneOfType([b("React").PropTypes.string,b("React").PropTypes.shape({enter:b("React").PropTypes.string,leave:b("React").PropTypes.string,active:b("React").PropTypes.string}),b("React").PropTypes.shape({enter:b("React").PropTypes.string,enterActive:b("React").PropTypes.string,leave:b("React").PropTypes.string,leaveActive:b("React").PropTypes.string,appear:b("React").PropTypes.string,appearActive:b("React").PropTypes.string})]).isRequired,appear:b("React").PropTypes.bool,enter:b("React").PropTypes.bool,leave:b("React").PropTypes.bool,appearTimeout:b("React").PropTypes.number,enterTimeout:b("React").PropTypes.number,leaveTimeout:b("React").PropTypes.number},transition:function(a,c,d){__p&&__p();var e=b("ReactDOM").findDOMNode(this);if(!e){c&&c();return}var f=this.props.name[a]||this.props.name+"-"+a,g=this.props.name[a+"Active"]||f+"-active",h=null;a=function a(d){if(d&&d.target!==e)return;clearTimeout(h);b("fbjs/lib/CSSCore").removeClass(e,f);b("fbjs/lib/CSSCore").removeClass(e,g);b("ReactTransitionEvents").removeEndEventListener(e,a);c&&c()};b("fbjs/lib/CSSCore").addClass(e,f);this.queueClassAndNode(g,e);d?(h=setTimeout(a,d),this.transitionTimeouts.push(h)):b("ReactTransitionEvents").addEndEventListener(e,a)},queueClassAndNode:function(a,b){this.classNameAndNodeQueue.push({className:a,node:b}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,g))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(a){b("fbjs/lib/CSSCore").addClass(a.node,a.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},UNSAFE_componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(a){clearTimeout(a)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(a){this.props.appear?this.transition("appear",a,this.props.appearTimeout):a()},componentWillEnter:function(a){this.props.enter?this.transition("enter",a,this.props.enterTimeout):a()},componentWillLeave:function(a){this.props.leave?this.transition("leave",a,this.props.leaveTimeout):a()},render:function(){return b("React").Children.only(this.props.children)}});e.exports=a}),null);
__d("ReactTransitionChildMapping",["React","emptyFunction","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("emptyFunction");c={getChildMapping:function(a){if(!a)return a;var c={};b("React").Children.toArray(a).forEach(function(a){var b=a.key,d=c[b]===void 0;d&&(c[b]=a)});return c},mergeChildMappings:function(a,b){__p&&__p();a=a||{};b=b||{};function c(c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c];else return a[c]}var d={},e=[];for(var f in a)Object.prototype.hasOwnProperty.call(b,f)?e.length&&(d[f]=e,e=[]):e.push(f);var g,h={};for(var i in b){if(Object.prototype.hasOwnProperty.call(d,i))for(g=0;g<d[i].length;g++){var j=d[i][g];h[d[i][g]]=c(j)}h[i]=c(i)}for(g=0;g<e.length;g++)h[e[g]]=c(e[g]);return h}};e.exports=c}),null);
__d("ReactTransitionGroup",["React","ReactTransitionChildMapping","fbjs/lib/emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={children:b("ReactTransitionChildMapping").getChildMapping(d.props.children)},d.performAppear=function(a){d.currentlyTransitioningKeys[a]=!0;var b=d.refs[a];b.componentWillAppear?b.componentWillAppear(d.$1.bind(babelHelpers.assertThisInitialized(d),a)):d.$1(a)},d.$1=function(a){var c=d.refs[a];c.componentDidAppear&&c.componentDidAppear();delete d.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(d.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&d.performLeave(a)},d.performEnter=function(a){d.currentlyTransitioningKeys[a]=!0;var b=d.refs[a];b.componentWillEnter?b.componentWillEnter(d.$2.bind(babelHelpers.assertThisInitialized(d),a)):d.$2(a)},d.$2=function(a){var c=d.refs[a];c.componentDidEnter&&c.componentDidEnter();delete d.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(d.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&d.performLeave(a)},d.performLeave=function(a){d.currentlyTransitioningKeys[a]=!0;var b=d.refs[a];b.componentWillLeave?b.componentWillLeave(d.$3.bind(babelHelpers.assertThisInitialized(d),a)):d.$3(a)},d.$3=function(a){var c=d.refs[a];c.componentDidLeave&&c.componentDidLeave();delete d.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(d.props.children);c&&Object.prototype.hasOwnProperty.call(c,a)?d.performEnter(a):d.setState(function(b){b=Object.assign({},b.children);delete b[a];return{children:b}})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]};d.componentDidMount=function(){var a=this.state.children;for(var b in a)a[b]&&this.performAppear(b)};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();a=b("ReactTransitionChildMapping").getChildMapping(a.children);var c=this.state.children;this.setState({children:b("ReactTransitionChildMapping").mergeChildMappings(c,a)});var d;for(d in a){var e=c&&Object.prototype.hasOwnProperty.call(c,d);a[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToEnter.push(d)}for(d in c){e=a&&Object.prototype.hasOwnProperty.call(a,d);c[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToLeave.push(d)}};d.componentDidUpdate=function(){var a=this.keysToEnter;this.keysToEnter=[];a.forEach(this.performEnter);a=this.keysToLeave;this.keysToLeave=[];a.forEach(this.performLeave)};d.render=function(){__p&&__p();var a=[];for(var c in this.state.children){var d=this.state.children[c];d&&a.push(b("React").cloneElement(this.props.childFactory(d),{ref:c,key:c}))}d=Object.assign({},this.props);delete d.transitionLeave;delete d.transitionName;delete d.transitionAppear;delete d.transitionEnter;delete d.childFactory;delete d.transitionLeaveTimeout;delete d.transitionEnterTimeout;delete d.transitionAppearTimeout;delete d.component;return b("React").createElement(this.props.component,d,a)};return c}(b("React").Component);a.displayName="ReactTransitionGroup";a.propTypes={component:b("React").PropTypes.any,childFactory:b("React").PropTypes.func};a.defaultProps={component:"span",childFactory:b("fbjs/lib/emptyFunction").thatReturnsArgument};e.exports=a}),null);
__d("ReactCSSTransitionGroup",["React","ReactCSSTransitionGroupChild","ReactTransitionGroup"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b="transition"+a+"Timeout",c="transition"+a;return function(a){if(a[c])if(a[b]==null)return new Error(b+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");else if(typeof a[b]!=="number")return new Error(b+" must be a number (in milliseconds)")}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){return b("React").createElement(b("ReactCSSTransitionGroupChild"),{name:d.props.transitionName,appear:d.props.transitionAppear,enter:d.props.transitionEnter,leave:d.props.transitionLeave,appearTimeout:d.props.transitionAppearTimeout,enterTimeout:d.props.transitionEnterTimeout,leaveTimeout:d.props.transitionLeaveTimeout},a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("ReactTransitionGroup"),Object.assign({},this.props,{childFactory:this.$1}))};return c}(b("React").Component);c.displayName="ReactCSSTransitionGroup";c.propTypes={transitionName:b("ReactCSSTransitionGroupChild").propTypes.name,transitionAppear:b("React").PropTypes.bool,transitionEnter:b("React").PropTypes.bool,transitionLeave:b("React").PropTypes.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")};c.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0};e.exports=c}),null);
__d("MqttEnv",["CurrentUser","Random","clearTimeout"],(function(a,b,c,d,e,f){"use strict";a={random:function(){return b("Random").random()},isUserLoggedInNow:function(){return b("CurrentUser").isLoggedInNow()},clearTimeout:function(a){return b("clearTimeout")(a)}};e.exports=a}),null);
__d("JSScheduler",["SchedulerFb-Internals_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={unstable_Immediate:b("SchedulerFb-Internals_DO_NOT_USE").unstable_ImmediatePriority,unstable_UserBlocking:b("SchedulerFb-Internals_DO_NOT_USE").unstable_UserBlockingPriority,unstable_Normal:b("SchedulerFb-Internals_DO_NOT_USE").unstable_NormalPriority,unstable_Low:b("SchedulerFb-Internals_DO_NOT_USE").unstable_LowPriority,unstable_Idle:b("SchedulerFb-Internals_DO_NOT_USE").unstable_IdlePriority},h=!1,i=b("SchedulerFb-Internals_DO_NOT_USE").unstable_scheduleCallback,j=b("SchedulerFb-Internals_DO_NOT_USE").unstable_cancelCallback,k={priorities:g,shouldYield:b("SchedulerFb-Internals_DO_NOT_USE").unstable_shouldYield,getCurrentPriorityLevel:b("SchedulerFb-Internals_DO_NOT_USE").unstable_getCurrentPriorityLevel,runWithPriority:b("SchedulerFb-Internals_DO_NOT_USE").unstable_runWithPriority,defer:function(a){var b=k.getCurrentPriorityLevel();return i(b,a)},next:function(a){return b("SchedulerFb-Internals_DO_NOT_USE").unstable_next(a)},getCallbackScheduler:function(){var a=k.getCurrentPriorityLevel();return function(b){return i(a,b)}},scheduleNormalPriCallback:function(a){return i(g.unstable_Normal,a)},scheduleLoggingPriCallback:function(a){return i(g.unstable_Low,a)},scheduleSpeculativeCallback:function(a){return i(g.unstable_Idle,a)},cancelCallback:function(a){j(a)},makeSchedulerGlobalEntry:function(c){__p&&__p();c===void 0&&(c=null),c!==null&&c!==void 0&&b("SchedulerFb-Internals_DO_NOT_USE").unstable_forceFrameRate(c),a.ScheduleJSWork=function(a){__p&&__p();return function(){__p&&__p();for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];if(h)a.apply(void 0,c);else{var e=k.getCurrentPriorityLevel();i(e,function(){h=!0;try{a.apply(void 0,c)}finally{h=!1}})}}}}};e.exports=k}),null);
__d("MqttUtils",["MqttEnv","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={endpointWithSessionId:function(a,c){if(!b("gkx")("919652"))return a;if(a.indexOf("?")>0)return a+"&sid="+c;else return a+"?sid="+c},generateSessionId:function(){return Math.floor(b("MqttEnv").random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,c,d){var e=arguments.length>1?a.then(c,d):a;e.then(null,function(a){b("setTimeoutAcrossTransitions")(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})}};e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","FantailLogger","FBLogger","JSScheduler","Log","LogHistory","MqttEnv","MqttUtils","MqttWsClientTypedLoggerLite","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttWsClientTypedLoggerLite").log,h="mqtt_client",i="MqttJsClient",j=null,k={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error",SIMPLE_PULL:"mqtt_simple_pull"};a=function(){__p&&__p();a.getInstance=function(){j||(j=new a());return j};function a(){this.$1=b("LogHistory").getInstance(h),this.$2=0,this.$3=b("gkx")("778292"),this.$4=b("MqttUtils").generateSessionId(),this.$5=Date.now()}var c=a.prototype;c.setAppId=function(a){this.$2===0&&(this.$2=a)};c.logConnect=function(a){var c=a.sessionID,d=a.connectionStatus,e=a.duration,f=a.hostname,g=a.attemptNumber,h=a.failTotal,i=a.successTotal,j=a.subscribedTopics,l=a.publishes,m=a.errorCode;a=a.errorMessage;var n=d?"success":"failed";this.bumpCounter(k.CONNECT+"."+n);n={user_session_id:this.$4,session_id:c,logged_in:b("MqttEnv").isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,attempt_number:g,fail_total:h,success_total:i,subscribed_topics:j,publishes:l,error_code:m,error_message:a};this.$6(k.CONNECT,n)};c.logSimplePull=function(a){var c=a.sessionID,d=a.status,e=a.duration,f=a.hostname,g=a.subscribedTopics;a=a.publishes;c={user_session_id:this.$4,session_id:c,logged_in:b("MqttEnv").isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,subscribed_topics:g,publishes:a};this.$6(k.SIMPLE_PULL,c)};c.logDisconnect=function(a){var b=a.sessionID,c=a.errorCode,d=a.errorMessage;a=a.duration;this.bumpCounter(k.DISCONNECT);b={user_session_id:this.$4,session_id:b,href:window.location.hostname,duration:a,error_code:c,error_message:d};this.$6(k.DISCONNECT,b)};c.logPublish=function(a){var b=a.sessionID,c=a.topic,d=a.connectionStatus;a=a.publishStatus;this.bumpCounter(k.PUBLISH+"."+c);b={user_session_id:this.$4,href:window.location.hostname,session_id:b,topic:c,connection_status:d,publish_status:a};this.$6(k.PUBLISH,b)};c.logError=function(a,c){var d=this;b("JSScheduler").scheduleLoggingPriCallback(function(){try{b("FBLogger")(h).catching(a).mustfix(c),d.$7(b("FantailLogger").error,c)}catch(a){}})};c.logMiscellaneousError=function(a){a=a.errorMessage;a={user_session_id:this.$4,logged_in:b("MqttEnv").isUserLoggedInNow(),href:window.location.hostname,error_message:a,time_passed:Date.now()-this.$5};this.$6(k.CLIENT_ERROR,a)};c.logErrorWarn=function(a,c){var d=this;b("JSScheduler").scheduleLoggingPriCallback(function(){try{b("FBLogger")(h).catching(a).warn(c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.logWarn=function(a,c){var d=this;b("JSScheduler").scheduleLoggingPriCallback(function(){try{d.$1.warn(a,c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.debugTrace=function(a,c){var d=this;b("JSScheduler").scheduleLoggingPriCallback(function(){try{d.$1.debug(a,c),d.$7(b("FantailLogger").debug,c)}catch(a){}})};c.bumpCounter=function(a){var c=this;b("JSScheduler").scheduleLoggingPriCallback(function(){c.$2!==0&&b("BanzaiODS").bumpEntityKey("mqtt_ws_client",c.$2+"."+a),b("BanzaiODS").bumpEntityKey("mqtt_ws_client",a)})};c.$6=function(a,c){var d=this;b("JSScheduler").scheduleLoggingPriCallback(function(){c.event_type=a;c.app_id=d.$2;c.online=d.$8();var e=JSON.stringify(c);d.$1.log(a,e);a!==k.PUBLISH&&a!==k.DISCONNECT&&g(c);d.$7(b("FantailLogger").info,e)})};c.$7=function(a,c){b("JSScheduler").scheduleLoggingPriCallback(function(){b("gkx")("676936")&&a(i,c)})};c.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();e.exports=a}),null);
__d("IrisSubscribeChecker",["MqttEnv","MqttLogger","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();this.$1=b("MqttLogger").getInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1);b("gkx")("678651")||(this.$6=!1)}var c=a.prototype;c.start=function(){this.$6=!0};c.stop=function(){this.$6=!1,this.$9()};c.onConnectAttempt=function(){};c.onConnectFailure=function(){this.$9()};c.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=b("setTimeoutAcrossTransitions")(function(){a.$10()},8e3))};c.onConnectSuccess=function(){};c.onConnectionLost=function(){this.$9()};c.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};c.onUnsubscribe=function(a){};c.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};c.onMessage=function(a){};c.onWSFatal=function(){};c.$9=function(){this.$2!==null&&(b("MqttEnv").clearTimeout(this.$2),this.$2=null)};c.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$1.logMiscellaneousError({errorMessage:a});this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();e.exports=a}),null);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();e.exports=a}),null);
__d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};return a}();e.exports=a}),null);
__d("MqttAnalyticsHook",["MqttEnv","MqttLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=b("MqttLogger").getInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$1.bumpCounter("session_start"),b("MqttEnv").isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var c=a.prototype;c.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt")};c.onConnectFailure=function(){this.$3++,this.$1.bumpCounter("ws_connect_failure")};c.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};c.onConnectSuccess=function(){this.$2===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$2++,this.$1.bumpCounter("ws_connect_success")};c.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};c.onSubscribe=function(a){};c.onUnsubscribe=function(a){};c.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};c.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};c.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};c.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send")};c.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$4===0&&this.$1.bumpCounter("polling_first_success"),this.$4++};c.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};c.onPollFinish=function(){};c.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$5++};return a}();e.exports=a}),null);
__d("MqttProtocolUtils",["MqttEnv","setTimeoutAcrossTransitions","sprintf"],(function(a,b,c,d,e,f){__p&&__p();function a(a){a=a;var b=new Array(1),c=0;do{var d=a%128;a>>=7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function g(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function c(a,b){return 256*a[b]+a[b+1]}function d(a,b,c,d){d=d;d=g(b,c,d);h(a,c,d);return d+b}function f(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function h(a,c,d){__p&&__p();d=d;var e;for(e=0;e<a.length;e++){var f=a.charCodeAt(e);if(55296<=f&&f<=56319){var g=a.charCodeAt(++e);if(isNaN(g))throw new Error(b("sprintf")("Malformed Unicode string:%s %s.",f,g));f=(f-55296<<10)+(g-56320)+65536}f<=127?c[d++]=f:f<=2047?(c[d++]=f>>6&31|192,c[d++]=f&63|128):f<=65535?(c[d++]=f>>12&15|224,c[d++]=f>>6&63|128,c[d++]=f&63|128):(c[d++]=f>>18&7|240,c[d++]=f>>12&63|128,c[d++]=f>>6&63|128,c[d++]=f&63|128)}return c}function i(a,c,d){__p&&__p();var e="",f,g=c;while(g<c+d){var h=a[g++];if(h<128)f=h;else{var i=a[g++]-128;if(i<0)throw new Error(b("sprintf")("Malformed UTF data:%s %s.",h.toString(16),i.toString(16)));if(h<224)f=64*(h-192)+i;else{var j=a[g++]-128;if(j<0)throw new Error(b("sprintf")("Malformed UTF data:%s %s %s",h.toString(16),i.toString(16),j.toString(16)));if(h<240)f=4096*(h-224)+64*i+j;else{var k=a[g++]-128;if(k<0)throw new Error(b("sprintf")("Malformed UTF data:%s %s %s %s",h.toString(16),i.toString(16),j.toString(16),k.toString(16)));if(h<248)f=262144*(h-240)+4096*i+64*j+k;else throw new Error(b("sprintf")("Malformed UTF data:%s %s %s %s",h.toString(16),i.toString(16),j.toString(16),k.toString(16)))}}}f>65535&&(f-=65536,e+=String.fromCharCode(55296+(f>>10)),f=56320+(f&1023));e+=String.fromCharCode(f)}return e}var j=function(){"use strict";__p&&__p();function a(a,c,d){var e=this;this.$6=function(){e.$3?(e.$3=!1,e.$4(),e.$2=b("setTimeoutAcrossTransitions")(e.$6,e.$1)):e.$5()};this.$1=a*1e3;this.$4=c;this.$5=d;this.$3=!1}var c=a.prototype;c.reset=function(){this.$3=!0,b("MqttEnv").clearTimeout(this.$2),this.$1>0&&(this.$2=b("setTimeoutAcrossTransitions")(this.$6,this.$1))};c.cancel=function(){b("MqttEnv").clearTimeout(this.$2)};return a}();e.exports={UTF8Length:f,stringToUTF8:h,parseUTF8:i,encodeMBI:a,writeUint16:g,readUint16:c,writeString:d,Pinger:j}}),null);
__d("MqttProtocolCodec",["MqttProtocolUtils","sprintf"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttProtocolUtils").UTF8Length,h=b("MqttProtocolUtils").encodeMBI,i=b("MqttProtocolUtils").parseUTF8,j=b("MqttProtocolUtils").readUint16,k=b("MqttProtocolUtils").stringToUTF8,l=b("MqttProtocolUtils").writeString,m=b("MqttProtocolUtils").writeUint16,n=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),o=[0,6,77,81,73,115,100,112,3];function p(a,c){__p&&__p();c=c;var d=c,e=a[c],f=e>>4;c+=1;var g,h=0,k=1;do{if(c==a.length)return{wireMessage:null,position:d};g=a[c++];h+=(g&127)*k;k*=128}while((g&128)!==0);g=c+h;if(g>a.length)return{wireMessage:null,position:d};var l;switch(f){case n.CONNACK:k=a[c++];h=!!(k&1);d=a[c++];l=new s(h,d);break;case n.PUBLISH:k=e&15;h=k>>1&3;d=j(a,c);c+=2;e=i(a,c,d);c+=d;d=null;h===1&&(d=j(a,c),c+=2);var m=w.createWithBytes(a.subarray(c,g)),o=(k&1)===1;k=(k&8)===8;l=new x(e,m,h,d,o,k);break;case n.PINGRESP:l=new q("PINGRESP");break;case n.PUBACK:case n.UNSUBACK:e=j(a,c);l=new t(f===n.PUBACK?"PUBACK":"UNSUBACK",e);break;case n.SUBACK:m=j(a,c);c+=2;h=a.subarray(c,g);l=new r(m,h);break;default:throw new Error(b("sprintf")("AMQJS0016E Invalid MQTT message type %s.",f))}return{wireMessage:l,position:g}}function a(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=p(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b}function c(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this._receiveBuffer!=null){var c=this._receiveBuffer.length,d=new Uint8Array(this._receiveBuffer.length+a.length);d.set(this._receiveBuffer);d.set(a,c);a=d;delete this._receiveBuffer}c=0;while(c<a.length){d=p(a,c);var e=d.wireMessage;c=d.position;if(e!=null)b.push(e);else break}c<a.length&&(this._receiveBuffer=a.subarray(c));return b}d=function(){"use strict";function a(a){this.messageType=n[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var q=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(d);f=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(h(0),1);return b};return b}(d);var r=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(d),s=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(d),t=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=h(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=m(this.messageIdentifier,e,d);return b};return a}(d),u=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNECT")||this;d.clientId=a;d.connectOptions=c;return d}var c=a.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4,b=o.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=h(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(o,a);a+=o.length;c=2|128;d[a++]=c;a=m(this.connectOptions.keepAliveInterval,d,a);a=l(this.clientId,g(this.clientId),d,a);a=l(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return a}(d),v=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a,d,e,f){var g;g=c.call(this,a)||this;g.topic=d;if(e<0&&e>1||e===1&&f==null)throw new TypeError(b("sprintf")("Invalid argument %s for %s.","qos: "+e,"messageType: "+a));g.qos=e;g.messageIdentifier=f;return g}var d=a.prototype;d.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===n.SUBSCRIBE&&(c+=1);var d=h(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=m(this.messageIdentifier,e,a));a=l(this.topic,b,e,a);this.messageType===n.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return a}(d),w=function(){"use strict";__p&&__p();function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new ArrayBuffer(g(b));c=new Uint8Array(c);c=k(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=i(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),x=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a,d,e,f,g,h){__p&&__p();var i;i=c.call(this,"PUBLISH")||this;i.topic=a;i.payloadMessage=d;i.qos=e;i.messageIdentifier=f;i.retained=g!=null?g:!1;i.duplicate=h!=null?h:!1;if(i.qos===1&&i.messageIdentifier==null)throw new TypeError(b("sprintf")("AMQJS0013E Invalid argument %s for %s.","qos: 1","messageIdentifier: null | Publish"));return i}var d=a.prototype;d.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=h(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=l(this.topic,b,f,a);this.messageIdentifier!=null&&(a=m(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(d);e.exports={MESSAGE_TYPE:n,WireMessage:{Base:d,PubAckUnsubAck:t,Ping:q,ConnAck:s,Connect:u,Disconnect:f,Subscription:v,Publish:x},createMessageWithString:w.createWithString,decodeMessage:p,decodeMessages:a,deframeMessages:c}}),null);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={MqttError:a,MqttChannelError:c,ConnectFailure:b}}),null);
__d("MqttProtocolClient",["JSScheduler","MqttEnv","MqttLogger","MqttProtocolCodec","setTimeoutAcrossTransitions","MqttTypes","MqttProtocolUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h=6e4,i=b("MqttProtocolCodec").MESSAGE_TYPE,j=b("MqttProtocolCodec").WireMessage,k=b("MqttProtocolCodec").createMessageWithString,l=b("MqttProtocolCodec").deframeMessages;a=b("MqttTypes").MqttError;var m=b("MqttTypes").ConnectFailure,n=b("MqttProtocolUtils").Pinger,o={SOCKET_ERROR:new a(1,"Socket error"),SOCKET_MESSAGE:new a(2,"Unable to parse invalid socket message"),INVALID_DATA_TYPE:new a(3,"Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new a(4,"Connect timed out"),CONNACK_FAILURE:new a(5,"Connection failure due to connack"),PING_TIMEOUT:new a(6,"Ping timeout"),APP_DISCONNECT:new a(7,"Disconnect initiated by app"),SERVER_DISCONNECT:new a(8,"Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"Socket connection closed")};c=function(){__p&&__p();function a(a){__p&&__p();this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=b("MqttLogger").getInstance(),this.$10=function(a,c){var d=this,e=this.$5;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(b("MqttEnv").clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null);e?b("JSScheduler").scheduleNormalPriCallback(function(){d.$2.onConnectionLost(a)}):b("JSScheduler").scheduleNormalPriCallback(function(){d.$2.onConnectFailure(new m(a,c!=null?c:0))})},this.$11=function(a){var b=this.$6;if(b==null)return;if(b.readyState!=b.OPEN)return;b.send(a.encode())},this.$3=a,this.$2={userName:"",mqttVersion:3,keepAliveInterval:10,ignoreSubProtocol:!1,onConnectSuccess:function(){},onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onMessageArrived:function(a,b){},onMessageDelivered:function(a,b){}}}var c=a.prototype;c.connect=function(a){__p&&__p();var c=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(b("MqttEnv").clearTimeout(this.$7),this.$7=null);this.$7=b("setTimeoutAcrossTransitions")(function(){c.$9.bumpCounter("protocol.error.connect.timeout"),c.$10(o.CONNECT_TIMEOUT)},g*1e3);this.$6=new WebSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){c.setConnected(!0),c.$11(new j.Connect(c.$1,a)),a.onConnection()};this.$6.onmessage=function(a){__p&&__p();a=a.data;if(!(a instanceof ArrayBuffer)){c.$9.bumpCounter("protocol.error.onmessage.type");c.$10(o.INVALID_DATA_TYPE);return}try{a=l(a);for(var b=0;b<a.length;b++)c.handleMessage(a[b])}catch(a){b=o.SOCKET_MESSAGE;c.$9.logError(a,b.errorMessage);c.$9.bumpCounter("protocol.error.onmessage.parse");c.$10(b)}};this.$6.onerror=function(a){c.$9.bumpCounter("protocol.error.socket"),c.$10(o.SOCKET_ERROR)};this.$6.onclose=function(a){c.$9.bumpCounter("protocol.socket.close"),c.$10(o.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new n(a.keepAliveInterval,this.$11.bind(this,new j.Ping("PINGREQ")),this.$10.bind(this,o.PING_TIMEOUT))};c.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5)return;this.$11(new j.Disconnect());this.$10(o.APP_DISCONNECT)};c.isConnected=function(){return this.$5};c.setConnected=function(a){this.$5=a};c.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new j.Subscription("SUBSCRIBE",a,0,this.$12());this.$11(a)};c.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new j.Subscription("UNSUBSCRIBE",a,0,this.$12());this.$11(a)};c.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$12();a=new j.Publish(a,k(b),c,d);this.$11(a);return d};c.$12=function(){++this.$4===h&&(this.$4=1);return this.$4};c.handleMessage=function(a){__p&&__p();var c=this;switch(a.messageType){case i.CONNACK:this.$7!=null&&(b("MqttEnv").clearTimeout(this.$7),this.$7=null);if(a instanceof j.ConnAck){var d=a;if(d.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.$10(o.CONNACK_FAILURE,d.returnCode);return}b("JSScheduler").scheduleNormalPriCallback(function(){c.$2.onConnectSuccess()});this.$8!=null&&this.$8.reset()}break;case i.PUBLISH:if(a instanceof j.Publish){var e=a;b("JSScheduler").scheduleNormalPriCallback(function(){c.$2.onMessageArrived(e.topic,e.payloadMessage.payloadString)});d=e.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(e.qos===1&&d!=null){d=new j.PubAckUnsubAck("PUBACK",d);this.$11(d)}}break;case i.PUBACK:if(a instanceof j.PubAckUnsubAck){d=a;var f=d.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");b("JSScheduler").scheduleNormalPriCallback(function(){c.$2.onMessageDelivered("",f)})}break;case i.PINGRESP:this.$8!=null&&this.$8.reset();break;case i.DISCONNECT:this.$10(o.SERVER_DISCONNECT);break;case i.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case i.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();e.exports=c}),null);
__d("MqttUserName",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(a,b,c,d,e,f){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f}var b=a.prototype;b.gen=function(a,b,c){a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:1,d:this.$4,ct:"websocket",mqtt_sid:"",aid:this.$5,st:b,pm:c,dc:"",no_auto_fg:!0};return JSON.stringify(a)};return a}();e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/Irg6QaR_7LF/
 */
__d("paho-mqtt",["setTimeoutAcrossTransitions","MqttLogger"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttLogger").getInstance();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var c=function(c){__p&&__p();var d="@VERSION@",e={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},f=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(k(i.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},h=function(a,b){return function(){return a.apply(b,arguments)}},i={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out. SocketState: {0}, HasSocketError: {1}."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out. HasSocketError: {0}."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},j={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},k=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},l=[0,6,77,81,73,115,100,112,3],m=[0,4,77,81,84,84,4],n=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};n.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],d=0,f;this.messageIdentifier!==void 0&&(b+=2);switch(this.type){case e.CONNECT:switch(this.mqttVersion){case 3:b+=l.length+3;break;case 4:b+=m.length+3;break}b+=t(this.clientId)+2;this.willMessage!==void 0&&(b+=t(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==void 0&&(b+=t(this.userName)+2);this.password!==void 0&&(b+=t(this.password)+2);break;case e.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=t(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case e.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=t(this.topics[g]),b+=c[g]+2;break;case e.PUBREL:a|=2;break;case e.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);d=t(this.payloadMessage.destinationName);b+=d+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case e.DISCONNECT:break;default:break}var i=s(b),j=i.length+1;b=new ArrayBuffer(b+j);var k=new Uint8Array(b);k[0]=a;k.set(i,1);if(this.type==e.PUBLISH)j=q(this.payloadMessage.destinationName,d,k,j);else if(this.type==e.CONNECT){switch(this.mqttVersion){case 3:k.set(l,j);j+=l.length;break;case 4:k.set(m,j);j+=m.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==void 0&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==void 0&&(a|=128);this.password!==void 0&&(a|=64);k[j++]=a;j=p(this.keepAliveInterval,k,j)}this.messageIdentifier!==void 0&&(j=p(this.messageIdentifier,k,j));switch(this.type){case e.CONNECT:j=q(this.clientId,t(this.clientId),k,j);this.willMessage!==void 0&&(j=q(this.willMessage.destinationName,t(this.willMessage.destinationName),k,j),j=p(f.byteLength,k,j),k.set(f,j),j+=f.byteLength);this.userName!==void 0&&(j=q(this.userName,t(this.userName),k,j));this.password!==void 0&&(j=q(this.password,t(this.password),k,j));break;case e.PUBLISH:k.set(h,j);break;case e.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=q(this.topics[g],c[g],k,j),k[j++]=this.requestedQos[g];break;case e.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=q(this.topics[g],c[g],k,j);break;default:}return b};function o(a,b){__p&&__p();var c=b,d=a[b],f=d>>4;d=d&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new n(f);switch(f){case e.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case e.PUBLISH:c=d>>1&3;f=r(a,b);b+=2;h=v(a,b,f);b+=f;c>0&&(i.messageIdentifier=r(a,b),b+=2);f=new A(a.subarray(b,g));(d&1)==1&&(f.retained=!0);(d&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case e.PUBACK:case e.PUBREC:case e.PUBREL:case e.PUBCOMP:case e.UNSUBACK:i.messageIdentifier=r(a,b);break;case e.SUBACK:i.messageIdentifier=r(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function p(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function q(a,b,c,d){d=p(b,c,d);u(a,c,d);return d+b}function r(a,b){return 256*a[b]+a[b+1]}function s(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function t(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function u(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(k(i.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function v(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var g=a[f++];if(g<128)e=g;else{var h=a[f++]-128;if(h<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),""]));if(g<224)e=64*(g-192)+h;else{var j=a[f++]-128;if(j<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16)]));if(g<240)e=4096*(g-224)+64*h+j;else{var l=a[f++]-128;if(l<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16),l.toString(16)]));if(g<248)e=262144*(g-240)+4096*h+64*j+l;else throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var w=function(a,c,d){__p&&__p();this._client=a;this._window=c;this._keepAliveInterval=d*1e3;this.isReset=!1;var f=new n(e.PINGREQ).encode(),g=function(a){return function(){return h.apply(a)}},h=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(i.PING_TIMEOUT.code,k(i.PING_TIMEOUT,[this._client._hasSocketError]))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(f),this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},x=function(a,c,d,e,f){this._window=c;d||(d=30);c=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=b("setTimeoutAcrossTransitions")(c(e,a,f),d*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},y=function(a,b,d,e,f){__p&&__p();if(!("WebSocket"in c&&c.WebSocket!==null))throw new Error(k(i.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in c&&c.ArrayBuffer!==null))throw new Error(k(i.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,b,d,e,f);this.host=b;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=b+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0};y.prototype.host=null;y.prototype.port=null;y.prototype.path=null;y.prototype.uri=null;y.prototype.clientId=null;y.prototype.socket=null;y.prototype.connected=!1;y.prototype.maxMessageIdentifier=6e4;y.prototype.connectOptions=null;y.prototype.hostIndex=null;y.prototype.onConnected=null;y.prototype.onConnectionLost=null;y.prototype.onMessageDelivered=null;y.prototype.onMessageArrived=null;y.prototype.traceFunction=null;y.prototype._msg_queue=null;y.prototype._buffered_msg_queue=null;y.prototype._connectTimeout=null;y.prototype.sendPinger=null;y.prototype.receivePinger=null;y.prototype._reconnectInterval=1;y.prototype._reconnecting=!1;y.prototype._hasSocketError=!1;y.prototype._reconnectTimeout=null;y.prototype.disconnectedPublishing=!1;y.prototype.disconnectedBufferSize=5e3;y.prototype.receiveBuffer=null;y.prototype._traceBuffer=null;y.prototype._MAX_TRACE_ENTRIES=100;y.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(k(i.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(k(i.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};y.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(k(i.INVALID_STATE,["not connected"]));var c=new n(e.SUBSCRIBE);c.topics=[a];b.qos!==void 0?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:k(a)})});b.timeout&&(c.timeOut=new x(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:i.SUBSCRIBE_TIMEOUT.code,errorMessage:k(i.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};y.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(k(i.INVALID_STATE,["not connected"]));var c=new n(e.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new x(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:i.UNSUBSCRIBE_TIMEOUT.code,errorMessage:k(i.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};y.prototype.send=function(a){this._trace("Client.send",a);wireMessage=new n(e.PUBLISH);wireMessage.payloadMessage=a;a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage,null));this._schedule_message(wireMessage);return wireMessage.messageIdentifier};y.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(k(i.INVALID_STATE,["not connecting or connected"]));wireMessage=new n(e.DISCONNECT);this._notify_msg_sent[wireMessage]=h(this._disconnected,this);this._schedule_message(wireMessage)};y.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};y.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),d)};y.prototype.stopTrace=function(){delete this._traceBuffer};y.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=h(this._on_socket_open,this);this.socket.onmessage=h(this._on_socket_message,this);this.socket.onerror=h(this._on_socket_error,this);this.socket.onclose=h(this._on_socket_close,this);this.sendPinger=new w(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new w(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new x(this,window,this.connectOptions.timeout,this._onConnectTimeout,[])};y.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};y.prototype.store=function(a,b){};y.prototype.restore=function(a){};y.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};y.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==void 0)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===e.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};y.prototype._on_socket_open=function(){var a=new n(e.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};y.prototype._on_socket_message=function(a){this._trace("Client._on_socket_message",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};y.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=o(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(i.INTERNAL_ERROR.code,k(i.INTERNAL_ERROR,[a.message,d]));return}return b};y.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case e.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();this.connectOptions.cleanSession&&(this._sentMessages={},this._receivedMessages={});if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{g.bumpCounter("paho_mqtt.error.connack.invalidreturncode");this.connected=!1;this._disconnected(i.CONNACK_RETURNCODE.code,k(i.CONNACK_RETURNCODE,[a.returnCode,j[a.returnCode]]),a.returnCode);break}var b=[];for(var c in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,c)&&b.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0){var d=null,f=this._buffered_msg_queue.reverse();while(d=f.pop())b.push(d),this.onMessageDelivered&&(this._notify_msg_sent[d]=this.onMessageDelivered(d.payloadMessage,null))}var b=b.sort(function(a,b){return a.sequence-b.sequence});for(var f=0,d=b.length;f<d;f++){var h=b[f];if(h.type==e.PUBLISH&&h.pubRecReceived){var l=new n(e.PUBREL,{messageIdentifier:h.messageIdentifier});this._schedule_message(l)}else this._schedule_message(h)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(f,this._wsuri);this._process_queue();break;case e.PUBLISH:this._receivePublish(a);break;case e.PUBACK:d=a.messageIdentifier;var h=this._sentMessages[d];h&&(delete this._sentMessages[d],this.onMessageDelivered&&this.onMessageDelivered(h.payloadMessage,d));break;case e.PUBREC:var h=this._sentMessages[a.messageIdentifier];if(h){h.pubRecReceived=!0;var l=new n(e.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",h);this._schedule_message(l)}break;case e.PUBREL:b=this._receivedMessages[a.messageIdentifier];b&&(this._receiveMessage(b),delete this._receivedMessages[a.messageIdentifier]);f=new n(e.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(f);break;case e.PUBCOMP:d=a.messageIdentifier;var h=this._sentMessages[d];delete this._sentMessages[d];this.onMessageDelivered&&this.onMessageDelivered(h.payloadMessage,d);break;case e.SUBACK:var h=this._sentMessages[a.messageIdentifier];h&&(h.timeOut&&h.timeOut.cancel(),a.returnCode[0]===128?h.onFailure&&h.onFailure(a.returnCode):h.onSuccess&&h.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case e.UNSUBACK:var h=this._sentMessages[a.messageIdentifier];h&&(h.timeOut&&h.timeOut.cancel(),h.callback&&h.callback(),delete this._sentMessages[a.messageIdentifier]);break;case e.PINGRESP:this.sendPinger.reset();break;case e.DISCONNECT:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,k(i.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,k(i.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){l=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(i.INTERNAL_ERROR.code,k(i.INTERNAL_ERROR,[a.message,l]));return}};y.prototype._on_socket_error=function(a){g.bumpCounter("paho_mqtt.error.socket"),this.connectOptions.ignoreSocketError||(this._reconnecting||this._disconnected(i.SOCKET_ERROR.code,k(i.SOCKET_ERROR,[a.data])),this.connectOptions.onSocketError&&this.connectOptions.onSocketError(a)),this._hasSocketError=!0};y.prototype._on_socket_close=function(a){g.bumpCounter("paho_mqtt.socket.close"),this._reconnecting||this._disconnected(i.SOCKET_CLOSE.code,k(i.SOCKET_CLOSE,a!=null?[a.code,a.reason,a.wasClean]:[]))};y.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};y.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new n(e.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new n(e.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};y.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};y.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};y.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};y.prototype._onConnectTimeout=function(){g.bumpCounter("paho_mqtt.error.connect.timeout"),this._disconnected(i.CONNECT_TIMEOUT.code,k(i.CONNECT_TIMEOUT,[this.socket.readyState,this._hasSocketError]))};y.prototype._disconnected=function(a,b,c){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==void 0&&this._reconnecting){this._reconnectTimeout=new x(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===void 0&&(a=i.OK.code,b=k(i.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==i.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b,connack:c})}};y.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};y.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var z=function(a,b,c,d){__p&&__p();var e;if(typeof a!=="string")throw new Error(k(i.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;e=a;var g=e.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw new Error(k(i.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(k(i.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(k(i.INVALID_TYPE,[typeof c,"path"]));var h=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";e="ws://"+(h?"["+a+"]":a)+":"+b+c}var j=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;j++}if(typeof d!=="string"||j>65535)throw new Error(k(i.INVALID_ARGUMENT,[d,"clientId"]));var n=new y(e,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getURI=function(){return e};this._setURI=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};f(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",ignoreSocketError:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",onSocketError:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===void 0&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(k(i.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===void 0?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==void 0&&d.userName===void 0)throw new Error(k(i.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof A))throw new Error(k(i.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(k(i.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(k(i.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var g=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(k(i.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)g=!0;else if(!g)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(g)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!g){if(!d.ports)throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(k(i.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));g=d.hosts[b];var a=d.ports[b],h=g.indexOf(":")!==-1;e="ws://"+(h?"["+g+"]":g)+":"+a+c;d.uris.push(e)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(k(i.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof A)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(k(i.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new A(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof A)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(k(i.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));return n.send(e)}else{e=new A(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);arguments.length>=4&&(e.retained=d);return n.send(e)}};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(z.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var A=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw k(i.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return v(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(t(b));a=new Uint8Array(a);u(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(k(i.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(k(i.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(A.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});var B=function(a,b){a=new n(e.CONNECT,a);a.clientId=b;return a},C=function(a,b){b=new n(b);b.topics=[a];b.requestedQos=[1];b.messageIdentifier=this.messageSequenceId++;return b},D=function(a){return C(a,e.SUBSCRIBE)},E=function(a){return C(a,e.UNSUBSCRIBE)},F=function(a,b,c){var d;d=new A(b);d.destinationName=a;arguments.length>=3&&(d.qos=c);var f;f=new n(e.PUBLISH);f.payloadMessage=d;f.messageIdentifier=this.messageSequenceId++;return f},G=function(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=o(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b};return{TESTING_CLIENT_IMPL:y,Client:z,Message:A,Encoder:{encodeConnect:B,encodePublish:F,encodeSubscribe:D,encodeUnsubscribe:E,messageSequenceId:1},Decoder:{decode:G}}}(window);return c})}),null);
__d("MqttWsClient",["MqttLogger","MqttTypes","gkx","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttTypes").ConnectFailure,h=b("MqttTypes").MqttError,i=function(a){};a=function(){__p&&__p();function a(a){this.$2=a,this.$3=b("MqttLogger").getInstance(),this.$1=new(b("paho-mqtt").Client)(this.$2,"mqttwsclient"),this.$4={}}var c=a.prototype;c.connect=function(a){__p&&__p();var c=this;this.$4=a;this.$1.onConnectionLost=function(b){a.onConnectionLost(new h(b.errorCode,b.errorMessage))};this.$1.onMessageArrived=function(b){try{var d=b.destinationName;c.$3.bumpCounter("message_arrived.ws."+d);a.onMessageArrived(d,b.payloadString)}catch(a){c.$3.logError(a,"Unable to parse message");c.$3.bumpCounter((d="error_processing_message."+b.destinationName)!=null?d:"null")}};this.$1.onMessageDelivered=function(b,c){return a.onMessageDelivered(b,c)};this.$1.connect({userName:a.userName,mqttVersion:a.mqttVersion,keepAliveInterval:a.keepAliveInterval,onFailure:function(b){if(b!=null){var c=new h(b.errorCode,b.errorMessage);c=new g(c,b.connack)}else c=new g(new h(1,"No ResponseObject"),-1);a.onConnectFailure(c)},onSuccess:function(){return a.onConnectSuccess()},ignoreSubProtocol:a.ignoreSubProtocol,onSocketOpen:function(){return a.onConnection()},onSocketError:function(b){return a.onConnectionError(b)},ignoreSocketError:b("gkx")("811275")})};c.unsubscribe=function(a){this.$1.unsubscribe(a)};c.subscribe=function(a){this.$1.subscribe(a,{})};c.publish=function(a,b,c){return this.$1.publish(a,b,c,!1)};c.isConnected=function(){return this.$1.isConnected()};c.disconnect=function(){this.$4!=null&&(this.$4.onConnectSuccess=i,this.$4.onConnectFailure=i,this.$4.onConnection=i,this.$4.onConnectionError=i,this.$4.onMessageArrived=i,this.$4.onMessageDelivered=i),this.$1.connectOptions!=null&&(this.$1.connectOptions.onConnectSuccess=i,this.$1.connectOptions.onConnectFailure=i,this.$1.connectOptions.onConnection=i,this.$1.connectOptions.onConnectionError=i,this.$1.connectOptions.onMessageArrived=i,this.$1.connectOptions.onMessageDelivered=i),this.isConnected()&&this.$1.disconnect()};return a}();e.exports=a}),null);
__d("MqttConnection",["Promise","MqttConnectionHookCollection","MqttEnv","MqttLogger","MqttProtocolClient","MqttTypes","MqttUserName","MqttUtils","MqttWsClient","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("MqttTypes").ConnectFailure;var g=b("MqttTypes").MqttChannelError;b("MqttTypes").MqttError;var h=10,i="publish",j="subscribe",k="unsubscribe",l=function(a){},m=18e4,n=5*1e3,o=15,p=21,q=b("gkx")("919316")?"protocol":"paho";a=function(){__p&&__p();function a(){__p&&__p();this.$9=!1;this.$11=b("MqttLogger").getInstance();this.$12="Disconnected";this.$15=new Set();this.$16=new Map();this.$17=0;this.$18=0;this.$13=0;this.$14=0;this.$9=!1;this.$6="";this.$7=new(b("MqttUserName"))("",0,1,"",0,!0);this.$10=0;this.$8=null;var a=function(){};this.$1=a;this.$2=a;this.$3=a;this.$19=new(b("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$5=a}var c=a.prototype;c.run=function(a){__p&&__p();var b=this,c=a.onStateChange,d=a.onJSError,e=a.onMessageReceived,f=a.endpoint,g=a.mqttUserName,h=a.subscribedTopics,i=a.extraConnectMessageProvider;a=a.onConnectionListner;if(this.$9){this.$11.debugTrace("run","Run called while in running state.");return}this.$1=c;this.$3=e;this.$6=f;this.$7=g;this.$9=!0;this.$13=0;this.$2=d||l;h&&h.forEach(function(a){return b.$15.add(a)});this.$4=i;this.$20();this.$5=a;this.$21()};c.shutdown=function(){this.$22(),this.$9=!1,this.$11.debugTrace("shutdown","Shutdown")};c.subscribe=function(a){this.$15.add(a);this.ensureConnected(j)&&this.$23(a);return!0};c.publish=function(a,c,d){var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g=this.ensureConnected(i),h="connection_unknown";if(!g)h="connection_not_connected",e.reject(new Error("Client disconnected"));else{c=this.$24(a,c,d,e);h=c===!0?"connection_published":"connection_failed"}this.$11.logPublish({sessionID:this.$10,topic:a,connectionStatus:g,publishStatus:h});return f};c.unsubscribe=function(a){this.$15["delete"](a);this.ensureConnected(k)&&this.$25(a);return!0};c.addHook=function(a){this.$19.addHook(a)};c.removeHook=function(a){this.$19.removeHook(a)};c.isRunning=function(){return this.$9};c.getSessionId=function(){return this.$10};c.ensureConnected=function(a){__p&&__p();if(!this.$9){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$8==null){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$8.isConnected();if(!b){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};c.testOnlyGetSubscribedTopics=function(){return this.$15};c.$20=function(){var a=this;b("gkx")("901339")&&window.addEventListener("unload",function(b){return a.$26(b)})};c.$26=function(a){this.publish("/browser_close","{}",0)};c.$22=function(){this.$9&&this.$8!=null&&(this.$27("Disconnected"),this.$8!=null&&this.$8.disconnect(),this.$8=null)};c.$27=function(a){a!==this.$12&&(this.$12=a,this.$1(a))};c.$21=function(){__p&&__p();var a=this;if(!this.$9)return;this.$27("Connecting");var c=Date.now();this.$10=b("MqttUtils").generateSessionId();var d=Array.from(this.$15),e=b("MqttUtils").endpointWithSessionId(this.$6,this.$10);try{this.$8=b("gkx")("919316")?new(b("MqttProtocolClient"))(e):new(b("MqttWsClient"))(e);var f=this.$28(),i=f.map(function(a){return a.topic}),j=Date.now();e=this.$7.gen(this.$10,d,f);this.$8!=null&&(this.$8.connect({userName:e,mqttVersion:3,keepAliveInterval:h,ignoreSubProtocol:!0,onConnectFailure:function(b){return a.$29(b,j,d,i)},onConnectSuccess:function(){return a.$30(j,d,i)},onConnection:function(){return a.$31(f,d)},onConnectionError:function(b){return a.$32(b)},onConnectionLost:function(b){return a.$33(b)},onMessageArrived:function(b,c){return a.$34(b,c)},onMessageDelivered:function(b,c){return a.$35(b,c)}}),this.$11.bumpCounter(q+".connectattempt"),this.$19.onConnectAttempt())}catch(a){this.$11.bumpCounter("js_error_in_init_exception"),this.$27("Disconnected"),this.$36(!1,c,d,[],14,a.message),a&&this.$11.logErrorWarn(a,"js error"),this.$19.onWSFatal(),this.$37(new g(!1,"js error",a),"client_init")}};c.$28=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};c.$23=function(a){__p&&__p();try{if(this.$8!=null){this.$8.subscribe(a);this.$11.debugTrace("_doSubscribe","Subscribing to "+a);this.$19.onSubscribe(a);this.$11.bumpCounter(q+".subscribe");return!0}}catch(b){this.$11.logError(b,"Exception subscribing"),this.$11.bumpCounter("subscribe_exception."+a),this.$11.bumpCounter(q+".subscribe.error")}return!1};c.$25=function(a){__p&&__p();try{if(this.$8!=null){this.$8.unsubscribe(a);this.$11.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$19.onUnsubscribe(a);this.$11.bumpCounter(q+".unsubscribe");return!0}}catch(b){this.$11.logError(b,"Exception unsubscribing"),this.$11.bumpCounter("unsubscribe_exception."+a),this.$11.bumpCounter(q+".unsubscribe.error")}return!1};c.$24=function(a,b,c,d){__p&&__p();if(this.$8!=null)try{b=this.$8.publish(a,b,c);this.$11.bumpCounter(q+".publish");var e=b!=null?b:"null";this.$11.debugTrace("_doPublish","publish "+a+" with messageId:"+e+" qos:"+c);this.$19.onPublish(a);b!=null?this.$16.set(b,d):d.resolve();return!0}catch(b){this.$11.logError(b,"Exception publishing");this.$11.bumpCounter("publish_exception."+a);d.reject(b);this.$11.bumpCounter(q+".publish.error");return!1}else return!1};c.$38=function(a){__p&&__p();var c=this;a===void 0&&(a=null);if(!this.$9)return;this.$22();this.$39();this.$10=-1;this.$14=0;a=(a=a)!=null?a:Math.pow(2,Math.min(this.$13,6))*(1e3+b("MqttEnv").random()*200);this.$11.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");b("setTimeoutAcrossTransitions")(function(){c.$21()},a);this.$13+=1};c.$39=function(){if(!b("gkx")("807517"))return;var a=Date.now()-this.$14,c=this.$14!==0&&a>n,d=this.$13>o;(c||d)&&(this.$13=0);this.$14!==0&&a<=n&&this.$11.bumpCounter("short_lived_session");d&&this.$11.bumpCounter("connection_attempt_limit")};c.$36=function(a,b,c,d,e,f){a===!0?this.$18++:this.$17++,this.$11.logConnect({sessionID:this.$10,connectionStatus:a,duration:Date.now()-b,hostname:this.$6,attemptNumber:this.$13,failTotal:this.$17,successTotal:this.$18,subscribedTopics:c,publishes:d,errorCode:e,errorMessage:f})};c.$29=function(a,b,c,d){__p&&__p();var e=a.mqttError,f=e.errorMessage;this.$11.debugTrace("connect","Connect failed "+f);this.$11.bumpCounter(q+".onconnectfailure");this.$19.onConnectFailure();this.$36(!1,b,c,d,e.errorCode,f);if(a.connAck!=null){this.$11.bumpCounter(q+".connect_failure."+a.connAck);if(a.connAck===p){this.$38(m);return}}this.$38()};c.$31=function(a,b){__p&&__p();var c=this;this.$11.bumpCounter(q+".onconnection");this.$11.debugTrace("Connect","Socket established");this.$19.onConnected();b.forEach(function(a){c.$19.onSubscribe(a)});a.forEach(function(a){c.$19.onPublish(a.topic)});this.$27("TransportConnected");this.$5()};c.$30=function(a,c,d){this.$11.bumpCounter(q+".onconnectsuccess"),this.$11.debugTrace("connect","Connect success"),this.$19.onConnectSuccess(),this.$36(!0,a,c,d),this.$27("Connected"),this.$40(c),b("gkx")("807517")||(this.$13=0),this.$14=Date.now()};c.$33=function(a){this.$11.bumpCounter(q+".onconnectionlost"),a.errorCode&&this.$11.logDisconnect({sessionID:this.$10,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$14}),this.$11.debugTrace("connect","connection lost"),this.$19.onConnectionLost(),this.$38()};c.$32=function(a){};c.$34=function(a,b){this.$11.bumpCounter(q+".onmessagearrived");this.$11.debugTrace("onMessageArrived","Message received on "+a);this.$19.onMessage(a);try{this.$3(a,b)}catch(b){this.$11.logError(b,"Listener threw error"),this.$11.bumpCounter("listener_error."+a)}};c.$35=function(a,b){__p&&__p();this.$11.bumpCounter(q+".onmessagedelivered");a=b!=null?b:"null";this.$11.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$16.get(b);if(a==null)return;this.$16["delete"](b);a.resolve()};c.$40=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$15.has(a)||b.unsubscribe(a)});a=new Set(this.$15);a.forEach(function(a){c.has(a)||b.subscribe(a)})};c.$37=function(a,b){try{this.$11.bumpCounter("js_error_in_init");this.$11.bumpCounter(b+".error");var c=a?a.message:"error";this.$11.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$11.bumpCounter("js_error_in_error_logging"),this.$11.logError(a,"JS error while trying to log previous error")}};return a}();e.exports=a}),null);
__d("WebSocketAvailability",["UserAgentData"],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({NotAvailable:"NotAvailable",LikelyNotAvailable:"LikelyNotAvailable",Available:"Available"});function c(){if(!("WebSocket"in a&&a.WebSocket!==null))return g.NotAvailable;return b("UserAgentData").browserName==="Mobile Safari"&&b("UserAgentData").browserVersion!=null&&b("UserAgentData").browserVersion<6?g.LikelyNotAvailable:g.Available}e.exports={WSAvailabilities:g,getWSAvailability:c}}),null);
__d("MqttChannel",["Promise","requireDeferred","ChannelClientID","IrisSubscribeChecker","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttLogger","MqttPublishTimeoutConfig","MqttUserName","MqttUtils","WebSocketAvailability","setTimeoutAcrossTransitions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("WebSocketAvailability").getWSAvailability,h=b("WebSocketAvailability").WSAvailabilities,i=b("MqttPublishTimeoutConfig").mqttPublishTimeoutMs||60*1e3;a=function(){__p&&__p();function a(a){__p&&__p();var c=this,d=a.endpoint,e=a.pollingEndpoint,f=a.userFbid,g=a.appId,h=a.initialSubscribedTopics,i=a.capabilities,j=a.clientCapabilities;a=a.chatVisibility;a=a===void 0?!0:a;this.$9=b("MqttLogger").getInstance();this.$9.setAppId(g);this.$10=new(b("MqttUserName"))(f,i,j,b("ChannelClientID").getID(),g,a);this.$1=d;this.$2=e;this.$5="Disconnected";this.$6="LPInactive";this.$3=[];this.$4=new Set();this.$7=new Map();this.$8=new(b("MqttConnection"))();this.$16=new(b("MqttAnalyticsHook"))();this.$8.addHook(this.$16);this.$8.addHook(new(b("IrisSubscribeChecker"))(function(){return c.$4.size>0}));this.$11=!1;this.$15=new Map();this.$13=[];this.$14=[];this.$17(h);this.$18()}var c=a.prototype;c.$17=function(a){__p&&__p();var c=this;if(this.$8.isRunning()){this.$19("run","Connection started calling run again");return}if(b("gkx")("865725"))if(b("gkx")("865724")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(g()===h.NotAvailable){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$9.bumpCounter("ws_unavailable_polling");return}this.$8.run({onStateChange:function(a){c.$20(a)},onJSError:function(a){c.$21(a)},onMessageReceived:function(a,b){c.$22(a,b)},endpoint:this.$1,mqttUserName:this.$10,subscribedTopics:a,extraConnectMessageProvider:function(){return c.$23()},onConnectionListner:function(){return c.$24()}})};c.shutdown=function(){this.$8&&this.$8.shutdown()};c.publish=function(a,c,d){__p&&__p();d===void 0&&(d={qos:1,skipBuffer:!1});var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g="channel_unknown",h=b("MqttEnv").random();c={topic:a,payload:c,options:d,ack:e,publishToken:h,timeoutId:null};var i=this.$8.ensureConnected("MqttChannel");d.qos===1&&(c.timeoutId=this.$25(h),this.$15.set(h,c));!i?d.skipBuffer?(this.$14.push(c),g="channel_temp_buffered"):(this.$13.push(c),g="channel_buffered"):(this.$26(c),g="channel_published");this.$9.debugTrace("MqttChannel: publish","publish to "+a+", qos:"+d.qos+", skipBuffer:"+String(d.skipBuffer)+" status:"+g+" publishToken:"+h);this.$9.logPublish({sessionID:this.$8.getSessionId(),topic:a,connectionStatus:i,publishStatus:g});return f};c.subscribe=function(a,b){this.$8.subscribe(a);var c=this.$7.get(a);!c?(c=[b],this.$7.set(a,c)):c.push(b)};c.subscribeChannelEvents=function(a){this.$3.push(a)};c.registerExtraConnectPayloadProvider=function(a){var b=this;this.$4.add(a);if(this.$8.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};c.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};c.unsubscribe=function(a){this.$8.unsubscribe(a),this.$7["delete"](a)};c.getConnectionState=function(){return this.$5};c.getLongPollingStatus=function(){return this.$6};c.getEndpoint=function(){return this.$1};c.addHook=function(a){this.$8.addHook(a)};c.removeHook=function(a){this.$8.removeHook(a)};c.testOnlyMessageReceived=function(a,b){this.$22(a,b)};c.$26=function(a){var c=this,d=this.$8.publish(a.topic,a.payload,a.options.qos);this.$9.bumpCounter("publish_request."+a.topic);b("MqttUtils").promiseDone(d,function(){return c.$27(a,null)},function(b){return c.$27(a,b)})};c.$28=function(a){var c=this.$15.get(a);c!=null&&c.timeoutId!=null&&b("MqttEnv").clearTimeout(c.timeoutId);this.$15["delete"](a)};c.$25=function(a){__p&&__p();var c=this;a=b("setTimeoutAcrossTransitions")(function(a){var b=c.$15.get(a);if(!b)return;var d=b.topic;c.$9.bumpCounter("publish_timeout."+d);c.$9.debugTrace("publish_timeout","Timeout publishing topic: "+d+" publishToken: "+a);c.$28(a);b.ack.reject(new Error("Publish Timed Out"))},i,a);return a};c.$27=function(a,b){var c=a.publishToken,d=this.$15.get(c);if(!d)return;this.$28(c);d=a.ack;c="publish_resolved";b?(d.reject(b),c="publish_rejected"):d.resolve();this.$9.debugTrace("publish_resolved",c+" topic: "+a.topic+" publishToken: "+a.publishToken);this.$9.bumpCounter(c+"."+a.topic)};c.$24=function(){var a=this;this.$14.forEach(function(b){a.$26(b)});this.$14=[];this.$13.forEach(function(b){a.$26(b)});this.$13=[]};c.$22=function(a,b){__p&&__p();var c=this.$7.get(a);if(!c)this.$9.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$9.logError(a,"Listener exception"),this.$9.bumpCounter("listener_error")}}};c.$21=function(a){if(b("gkx")("865725")){a.isRecoverable?this.$9.bumpCounter("recoverable_error_skipped"):this.$9.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$9.bumpCounter("recoverable_error_not_skipped"):this.$9.bumpCounter("unrecoverable_error_not_skipped");a.isRecoverable||(this.$11=!0);this.$29(a)};c.$30=function(a){this.$29(a)};c.$29=function(a){__p&&__p();for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};c.$20=function(a){__p&&__p();var b=this;a==="Connecting"&&(this.$14.forEach(function(a){var c=a.publishToken,d=b.$15.get(c);if(!d)return;b.$28(c);a.ack.reject(new Error("Client Reconnecting"))}),this.$14=[]);this.$5=this.$31(a);this.$19("_changeState","Connection state = "+a);this.$32()};c.$31=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw new Error("Unknown state "+a)};c.$33=function(a){this.$6=a,this.$19("_changeLPStatus","LP status = "+a),this.$32()};c.$32=function(){__p&&__p();for(var a=this.$3,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.onMQTTStateChanged(this.$5,this.$6)}};c.$23=function(){var a=[];this.$4.forEach(function(b){b=b.getPublishMessages();Array.prototype.push.apply(a,b)});return a};c.$18=function(){__p&&__p();var a=this;b("gkx")("865725")&&this.$2&&this.$2!=""&&b("requireDeferred")("MqttLongPollingRunner").onReady(function(b){__p&&__p();b=new b(a.$2,a.$10,a.$11,function(b,c){return a.$22(b,c)},function(){return Array.from(a.$7.keys())},function(){return a.$23()},function(b){a.$30(b)},function(b){a.$33(b)});b.start();a.$8.addHook(b);b.addHook(a.$16);a.$12=b;a.$9.debugTrace("MqttChannel","longPollingRunner loaded")})};c.$19=function(a,b){this.$9.debugTrace(a,"Mqtt channel: "+b)};return a}();e.exports=a}),null);
__d("FBMqttChannel",["MqttChannel","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("MqttChannel"))({endpoint:b("MqttWebConfig").endpoint,pollingEndpoint:b("MqttWebConfig").pollingEndpoint,userFbid:b("MqttWebConfig").fbid,appId:b("MqttWebConfig").appID,initialSubscribedTopics:b("MqttWebConfig").subscribedTopics,capabilities:b("MqttWebConfig").capabilities,clientCapabilities:b("MqttWebConfig").clientCapabilities,chatVisibility:b("MqttWebConfig").chatVisibility})}),null);
__d("MqttLongPollingClient",["Promise","MqttLogger","XHRRequest","getCrossOriginTransport","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("paho-mqtt").Decoder,h=60*1e3;a=function(){__p&&__p();function a(){this.$2="",this.$3=b("MqttLogger").getInstance(),this.$1="Ready",this.$4="",this.$5=function(){},this.$6=function(a){},this.$7=function(){},this.$8=function(a){},this.$9=null}var c=a.prototype;c.run=function(a,b,c,d,e,f){this.$2=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$10(this.$4)};c.publish=function(a,c){return b("Promise").reject("not supported")};c.abort=function(){this.$9!=null&&this.$9.abort("Disconnected")};c.$11=function(a,b){if(this.$1===a)return;this.$1=a;a=="Error"&&b!=null&&this.$8(b)};c.$12=function(a){__p&&__p();if(this.$1!="RequestSend")return;if(!a){this.$13("EmptyResponse",null);return}this.$5();this.$11("ResponseReceived");a=g.decode(a);a=a.filter(function(a){return a.payloadMessage}).map(function(a){return{topic:a.payloadMessage.topic,payload:a.payloadMessage.payloadString}});this.$6(a);this.$7()};c.$13=function(a,b){b=b!=null?b.message:"null";this.$3.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$3.bumpCounter(""+a);this.$11("Error",a)};c.$10=function(a){__p&&__p();var c=this;if(this.$1!="Ready"||this.$9)return;this.$9=new(b("XHRRequest"))(this.$2).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(b("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return c.$12(a)}).setNetworkFailureHandler(function(a){c.$13("Network",a)}).setErrorHandler(function(a){c.$13("Error",a)}).setAbortHandler(function(a){c.$13("Abort",null)}).setTimeoutHandler(function(){c.$13("Timeout",null)}).setTimeout(h).send();this.$11("RequestSend")};return a}();e.exports=a}),null);
__d("exponentialBackoff",["MqttEnv","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();c===void 0&&(c=null);var d=null,e=0;function f(){__p&&__p();for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=function(){a.apply(c,g)};if(e===0)i();else if(d===null){var j=Math.pow(2,Math.min(e,6))*(1e3+b("MqttEnv").random()*200);d=b("setTimeoutAcrossTransitions")(function(){i(),d=null},j)}e++}f.reset=function(){e=0,d!=null&&(b("MqttEnv").clearTimeout(d),d=null)};f.isPending=function(){return d!=null};return f}e.exports=a}),null);
__d("MqttLongPollingRunner",["MqttLogger","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","WebSocketAvailability","exponentialBackoff","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttTypes").MqttChannelError,h=b("WebSocketAvailability").getWSAvailability,i=b("WebSocketAvailability").WSAvailabilities,j=4,k="mqtt_should_longpoll";a=function(){__p&&__p();function a(a,c,d,e,f,i,j,k){__p&&__p();var l=this;this.$19=function(){__p&&__p();try{if(!l.$24())return;var a=l.$9(),c=l.$10();a=a.filter(function(a){return l.MqttLongPollingSupportedTopics.has(a)});c=c.filter(function(a){return l.MqttLongPollingSupportedTopics.has(a.topic)});var d=b("MqttUtils").generateSessionId();d=l.$7.gen(d,a,c);if(a.length==0&&c.length==0){l.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");b("setTimeoutAcrossTransitions")(function(){l.$19()},1e3);return}l.$14=new(b("MqttLongPollingClient"))();l.$14.run(l.$6,d,function(){return l.$25()},function(a){return l.$26(a)},function(){return l.$27()},function(a){return l.$28(a)});l.$18.onPollRequestSent();d=a.join(",");a=c.map(function(a){return a.topic}).join(",");l.$5.debugTrace("LongPollingRunner","Making a poll request to "+l.$6+". SubscribedTopics:"+d+". Publishes:"+a)}catch(a){l.$5.bumpCounter("lp_js_error"),a&&l.$5.logErrorWarn(a,"js error lp"),l.$11(new g(!1,"js error lp",a))}};this.$6=a;this.$7=c;this.$1=!1;this.$2=0;this.$3=d;this.$4=h();this.$5=b("MqttLogger").getInstance();this.$8=e;this.$9=f;this.$10=i;this.$11=j;this.$12=k;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16=0;this.$18=new(b("MqttLongPollingHookCollection"))();this.$17=new(b("exponentialBackoff"))(this.$19,this);this.MqttLongPollingSupportedTopics=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue"]);b("gkx")("899244")&&(this.MqttLongPollingSupportedTopics.add("/webrtc"),this.MqttLongPollingSupportedTopics.add("/t_rtc_multi"))}var c=a.prototype;c.addHook=function(a){this.$18.addHook(a)};c.start=function(){this.$19()};c.onConnectAttempt=function(){};c.onConnectFailure=function(){this.$2++,this.$19()};c.onConnected=function(){};c.onConnectSuccess=function(){this.$1=!0};c.onConnectionLost=function(){};c.onSubscribe=function(a){};c.onUnsubscribe=function(a){};c.onPublish=function(a){};c.onMessage=function(a){};c.onWSFatal=function(){this.$3=!0,this.$19()};c.getStatus=function(){return this.$15};c.$20=function(a){a!=this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15))};c.$21=function(){this.$16=0};c.$22=function(){this.$16++,this.$16>=j&&this.$20("LPError")};c.$23=function(){__p&&__p();var a=b("gkx")("865724"),c=b("gkx")("865725");this.$5.debugTrace("LongPollingRunner","_shouldPoll? forcedPoll:"+String(a)+" enabled:"+String(c)+" wsAvailability:"+String(this.$4)+" hasSuccess:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(a)return!0;if(this.$4===i.NotAvailable){this.$5.bumpCounter(k+".na");return c}if(this.$3){this.$5.bumpCounter(k+".fatal");return c}if(this.$1)return!1;if(this.$4===i.LikelyNotAvailable&&this.$2>=2){this.$5.bumpCounter(k+".lna");return c}if(this.$2>=4){this.$5.bumpCounter(k+".failure");return c}return!1};c.$24=function(){if(this.$14!=null)return!1;var a=this.$23();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$20("LPActive"),this.$21());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$20("LPInactive"),this.$21());return a};c.$25=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$18.onPollRequestSuccess()};c.$26=function(a){__p&&__p();var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(var b=a,a=Array.isArray(b),c=0,b=a?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(a){if(c>=b.length)break;d=b[c++]}else{c=b.next();if(c.done)break;d=c.value}d=d;this.$18.onPollResponse(d.topic);this.$8(d.topic,d.payload)}};c.$27=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$18.onPollFinish(),this.$14=null,this.$17.reset(),this.$20("LPActive"),this.$21(),this.$19()};c.$28=function(a){this.$18.onPollRequestFailed(a),this.$14=null,this.$17(),this.$22()};return a}();e.exports=a}),null);
__d("lazyLoadComponent",["BootloaderResource","react"],(function(a,b,c,d,e,f){function a(a){function c(c){var d=b("BootloaderResource").read(a);return b("react").createElement(d,c)}c.displayName="lazyLoadComponent("+a.getModuleId()+")";return c}e.exports=a}),null);
__d("WebGraphQLLegacyHelper",["invariant"],(function(a,b,c,d,e,f,g){"use strict";e.exports={getURI:function(a){var b=a.controller,c=a.docID,d=a.queryID;a=a.variables;c!=d&&(c||d)!=null||g(0,5819,c,d);b=b.getURIBuilder();d?b.setFBID("query_id",d):b.setFBID("doc_id",c);a&&b.setString("variables",JSON.stringify(a));return b.getURI()}}}),null);
__d("XWebGraphQLQueryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/webgraphql/query/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}})}),null);
__d("WebGraphQLQueryBase",["invariant","WebGraphQLLegacyHelper","XWebGraphQLQueryController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.__getVariables=function(){return this.$1};c.__getDocID=function(){return this.constructor.__getDocID()};a.__getController=function(){return b("XWebGraphQLQueryController")};a.__getDocID=function(){g(0,1804)};a.getURI=function(a){return b("WebGraphQLLegacyHelper").getURI({controller:this.__getController(),docID:this.__getDocID(),variables:a})};a.getLegacyURI=function(a){return b("WebGraphQLLegacyHelper").getURI({controller:this.__getController(),queryID:this.getQueryID(),variables:a})};a.getQueryID=function(){g(0,5095)};return a}();e.exports=a}),null);
__d("cssVar",[],(function(a,b,c,d,e,f){function a(a){throw new Error('cssVar("'+a+'"): Unexpected class transformation.')}e.exports=a}),null);